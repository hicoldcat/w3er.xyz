---
title: å­¦ä¹  Solidityâ€”â€”æ™ºèƒ½åˆçº¦å¼€å‘æ‰‹å†Œ(2)
description: null
author: æŽç•™ç™½
weight: 0
date: 2022-12-19T14:15:29.151Z
lastmod: 2022-12-24T01:25:29.126Z
tags: []
categories:
  - åŒºå—é“¾
  - WEB3.0
  - Solidity
featuredImage: https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/20221219221551.png
---

```txt
ç›®å½•
    1.è¿™æœ¬æ‰‹å†Œæ˜¯ä¸ºè°å‡†å¤‡çš„ï¼Ÿ
    2.å¿…è¦çš„å‰æœŸçŸ¥è¯†
    3.ä»€ä¹ˆæ˜¯ Solidityï¼Ÿ
    4.ä»€ä¹ˆæ˜¯æ™ºèƒ½åˆçº¦ï¼Ÿ
    5.å¦‚ä½•åœ¨ Solidity ä¸­å£°æ˜Žå˜é‡å’Œå‡½æ•°ï¼Ÿ
    6.æ™ºèƒ½åˆçº¦ä¸­çš„å˜é‡ä½œç”¨åŸŸ
    7.å¯è§æ€§æ“ä½œç¬¦å¦‚ä½•å·¥ä½œ
    8.ä»€ä¹ˆæ˜¯æž„é€ å‡½æ•°ï¼Ÿ
    9.æŽ¥å£å’ŒæŠ½è±¡åˆçº¦
    10.æ™ºèƒ½åˆçº¦ç¤ºä¾‹
    11.ä»€ä¹ˆæ˜¯åˆçº¦çŠ¶æ€ï¼Ÿ
    12.çŠ¶æ€å¯å˜å…³é”®å­—ï¼ˆä¿®é¥°ç¬¦ï¼‰
    13.æ•°æ®ä½ç½®â€”â€”å­˜å‚¨ã€å†…å­˜å’Œå †æ ˆ
    14.typingå¦‚ä½•å·¥ä½œ
    15.Solidityæ•°æ®ç±»åž‹
    16.å¦‚ä½•åœ¨ Solidity ä¸­å£°æ˜Žå’Œåˆå§‹åŒ–æ•°ç»„
    17.ä»€ä¹ˆæ˜¯å‡½æ•°ä¿®é¥°ç¬¦ï¼Ÿ
    18.Solidity ä¸­çš„é”™è¯¯å¤„ç†â€”â€”require, assert, revert
    19.Solidity ä¸­çš„ç»§æ‰¿
    20.ç”¨æž„é€ å™¨å‚æ•°è¿›è¡Œç»§æ‰¿
    21.Solidity ä¸­çš„ç±»åž‹è½¬æ¢å’Œç±»åž‹æž„é€ 
    22.å¦‚ä½•åœ¨Solidityä¸­å¤„ç†æµ®ç‚¹æ•°
    23.å“ˆå¸Œã€ABIç¼–ç å’Œè§£ç 
    24.å¦‚ä½•è°ƒç”¨åˆçº¦å’Œä½¿ç”¨ fallback å‡½æ•°
    25.å¦‚ä½•å‘é€å’ŒæŽ¥æ”¶ä»¥å¤ªå¸
    26.Solidityåº“
    27.Solidity ä¸­çš„äº‹ä»¶å’Œæ—¥å¿—
    28.Solidity ä¸­çš„æ—¶é—´é€»è¾‘
    29.ç»“è®ºå’Œæ›´å¤šèµ„æº
```

## æŽ¥å£å’ŒæŠ½è±¡åˆçº¦

solidity ä¸­çš„[æŽ¥å£](https://docs.soliditylang.org/en/develop/contracts.html#interfaces)æ˜¯ä¸€ä¸ªéœ€è¦ç†è§£çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥å¤ªåŠä¸Šçš„æ™ºèƒ½åˆçº¦æ˜¯å…¬å¼€å¯è§çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥é€šè¿‡å®ƒä»¬çš„å‡½æ•°ä¸Žå®ƒä»¬è¿›è¡Œäº¤äº’ï¼ˆåœ¨å¯è§æ€§è¯´æ˜Žç¬¦å…è®¸æ‚¨è¿™æ ·åšçš„èŒƒå›´å†…ï¼ï¼‰ã€‚

è¿™å°±æ˜¯ä½¿æ™ºèƒ½åˆçº¦â€œå¯ç»„åˆâ€çš„åŽŸå› ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¦‚æ­¤å¤šçš„ Defi åè®®è¢«ç§°ä¸ºâ€œmoney Legosâ€â€”â€”ä½ å¯ä»¥ç¼–å†™ä¸Žå…¶ä»–æ™ºèƒ½åˆçº¦äº¤äº’çš„æ™ºèƒ½åˆçº¦ï¼Œè¿™äº›æ™ºèƒ½åˆçº¦åˆä¸Žå…¶ä»–æ™ºèƒ½åˆçº¦äº¤äº’ç­‰ç­‰â€¦â€¦ä½ æ˜Žç™½äº†ã€‚

æ‰€ä»¥å½“ä½ æƒ³è®©ä½ çš„æ™ºèƒ½åˆçº¦Aä¸Žå¦ä¸€ä¸ªæ™ºèƒ½åˆçº¦Bè¿›è¡Œäº¤äº’æ—¶ï¼Œä½ éœ€è¦Bçš„æŽ¥å£ã€‚ç•Œé¢ä¸ºæ‚¨æä¾›äº†å„ç§å‡½æ•°çš„ç´¢å¼•æˆ–èœå•ï¼Œä¾›æ‚¨è°ƒç”¨ç»™å®šçš„æ™ºèƒ½åˆçº¦ã€‚

æŽ¥å£çš„ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å®ƒä»¬ä¸èƒ½å¯¹å®šä¹‰çš„ä»»ä½•å‡½æ•°æœ‰ä»»ä½•å®žçŽ°ï¼ˆä»£ç é€»è¾‘ï¼‰ã€‚æŽ¥å£åªæ˜¯å‡½æ•°åç§°åŠå…¶é¢„æœŸå‚æ•°å’Œè¿”å›žç±»åž‹çš„é›†åˆã€‚å®ƒä»¬ä¸æ˜¯ Solidity ç‹¬æœ‰çš„ã€‚

æ‰€ä»¥æˆ‘ä»¬çš„`HotFudgeSauce`æ™ºèƒ½åˆçº¦çš„æŽ¥å£çœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆè¯·æ³¨æ„ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œsolidity æŽ¥å£æ˜¯é€šè¿‡åœ¨æ™ºèƒ½åˆçº¦çš„åç§°å‰åŠ ä¸Šâ€œIâ€æ¥å‘½åçš„ï¼š

```solidity
// SPDX-License-Identifier: MIT

pragma solidity ^0.8.7;

interface IHotFudgeSauce {
    function get() public view returns (uint);
    function increment() public;
    function decrement() public;
}
```

å°±è¿™æ ·äº†ï¼ç”±äºŽ`HotFudgeSauce`åªæœ‰ä¸‰ä¸ªå‡½æ•°ï¼Œç•Œé¢ä»…æ˜¾ç¤ºè¿™äº›å‡½æ•°ã€‚  

ä½†è¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦è€Œå¾®å¦™çš„ç‚¹ï¼šæŽ¥å£ä¸éœ€è¦åŒ…å«æ™ºèƒ½åˆçº¦ä¸­å¯è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°ã€‚å¯ä»¥ç¼©çŸ­æŽ¥å£ä»¥åŒ…å«æ‚¨æ‰“ç®—è°ƒç”¨çš„å‡½æ•°çš„å‡½æ•°å®šä¹‰ï¼  

å› æ­¤ï¼Œå¦‚æžœä½ åªæƒ³åœ¨`HotFudgeSauce`ä¸Šä½¿ç”¨`decrement()`æ–¹æ³•ï¼Œé‚£ä¹ˆä½ ç»å¯¹å¯ä»¥ä»Žä½ çš„æŽ¥å£ä¸­åˆ é™¤`get()`å’Œ`increment()`--ä½†ä½ å°†æ— æ³•ä»Žä½ çš„åˆçº¦ä¸­è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚

é‚£ä¹ˆå®žé™…ä¸Šæ˜¯æ€Žä¹ˆå›žäº‹å‘¢ï¼Ÿå¥½å§ï¼ŒæŽ¥å£åªæ˜¯ç»™ä½ çš„æ™ºèƒ½åˆçº¦æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œè®©ä½ çŸ¥é“åœ¨ä½ çš„ç›®æ ‡æ™ºèƒ½åˆçº¦ä¸­å¯ä»¥è°ƒç”¨å“ªäº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°æŽ¥å—å“ªäº›å‚æ•°ï¼ˆä»¥åŠå®ƒä»¬çš„æ•°æ®ç±»åž‹ï¼‰ï¼Œä»¥åŠä½ å¯ä»¥æœŸå¾…å“ªäº›ç±»åž‹çš„è¿”å›žæ•°æ®ã€‚åœ¨ Solidity ä¸­ï¼Œè¿™å°±æ˜¯æ‚¨ä¸Žå¦ä¸€ä¸ªæ™ºèƒ½åˆçº¦äº¤äº’æ‰€éœ€çš„å…¨éƒ¨ã€‚

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªç±»ä¼¼äºŽä½†åˆä¸åŒäºŽæŽ¥å£çš„æŠ½è±¡åˆçº¦ã€‚

[æŠ½è±¡åˆçº¦](https://docs.soliditylang.org/en/develop/contracts.html#abstract-contracts)æ˜¯ä½¿ç”¨`abstract`å…³é”®å­—å£°æ˜Žçš„ï¼Œæ˜¯ä¸€ç§å£°æ˜Žäº†ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°ä½†æœªå®žçŽ°çš„åˆçº¦ã€‚å¦ä¸€ç§è¯´æ³•æ˜¯ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªå‡½æ•°å·²å£°æ˜Žä½†æœªå®žçŽ°ã€‚  

åè¿‡æ¥è¯´ï¼ŒæŠ½è±¡åˆçº¦å¯ä»¥æœ‰å…¶å‡½æ•°çš„å®žçŽ°ï¼ˆä¸åƒæŽ¥å£å¯ä»¥æœ‰é›¶ä¸ªå®žçŽ°çš„å‡½æ•°ï¼‰ï¼Œä½†åªè¦è‡³å°‘æœ‰ä¸€ä¸ªå‡½æ•°æœªå®žçŽ°ï¼Œåˆçº¦å°±å¿…é¡»æ ‡è®°ä¸ºæŠ½è±¡çš„ï¼š

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.7;

abstract contract Feline {

    int public age;


    // not implemented.
    function utterance() public virtual returns (bytes32);

    

    // implemented.

    function setAge(int _age) public {

        age = _age;

    }

}
```

æ‚¨å¯èƒ½ï¼ˆåˆç†åœ°ï¼‰æƒ³çŸ¥é“è¿™æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚å¥½å§ï¼ŒæŠ½è±¡åˆçº¦ä¸èƒ½ç›´æŽ¥å®žä¾‹åŒ–ï¼ˆåˆ›å»ºï¼‰ã€‚å®ƒä»¬åªèƒ½è¢«ç»§æ‰¿è‡ªå®ƒä»¬çš„å…¶ä»–åˆçº¦ä½¿ç”¨ã€‚

å› æ­¤ï¼ŒæŠ½è±¡åˆçº¦é€šå¸¸è¢«ç”¨ä½œå…¶ä»–æ™ºèƒ½åˆçº¦å¯ä»¥â€œç»§æ‰¿â€çš„æ¨¡æ¿æˆ–â€œåŸºç¡€åˆçº¦â€ï¼Œä»Žè€Œè¿«ä½¿ç»§æ‰¿çš„æ™ºèƒ½åˆçº¦å®žçŽ°æŠ½è±¡ï¼ˆçˆ¶ï¼‰åˆçº¦å£°æ˜Žçš„æŸäº›å‡½æ•°ã€‚è¿™åœ¨ç›¸å…³åˆçº¦ä¹‹é—´å¼ºåˆ¶æ‰§è¡Œå®šä¹‰çš„ç»“æž„ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ç§æœ‰ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚

å½“æˆ‘ä»¬ç¨åŽè®¨è®ºç»§æ‰¿æ—¶ï¼Œè¿™ä¸ªç»§æ‰¿çš„ä¸œè¥¿ä¼šå˜å¾—æ›´æ¸…æ¥šä¸€ç‚¹ã€‚çŽ°åœ¨ï¼Œè¯·è®°ä½ï¼Œæ‚¨å¯ä»¥å£°æ˜Žä¸€ä¸ªä¸å®žçŽ°å…¶æ‰€æœ‰å‡½æ•°çš„æŠ½è±¡æ™ºèƒ½åˆçº¦â€”â€”ä½†å¦‚æžœæ‚¨è¿™æ ·åšï¼Œæ‚¨å°†æ— æ³•å®žä¾‹åŒ–å®ƒï¼Œæœªæ¥ç»§æ‰¿å®ƒçš„æ™ºèƒ½åˆçº¦å¿…é¡»å®Œæˆå®žçŽ°é‚£äº›æœªå®žçŽ°å‡½æ•°çš„å·¥ä½œã€‚

æŽ¥å£å’ŒæŠ½è±¡åˆçº¦ä¹‹é—´çš„ä¸€äº›é‡è¦åŒºåˆ«æ˜¯ï¼š

- æŽ¥å£å¯ä»¥æœ‰é›¶ä¸ªå®žçŽ°ï¼Œè€ŒæŠ½è±¡åˆçº¦å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å®žçŽ°ï¼Œåªè¦è‡³å°‘æœ‰ä¸€ä¸ªå‡½æ•°æ˜¯â€œæŠ½è±¡çš„â€ï¼ˆå³æœªå®žçŽ°ï¼‰ã€‚
- æŽ¥å£ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½å¿…é¡»æ ‡è®°ä¸ºâ€œå¤–éƒ¨â€ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½ç”±å®žçŽ°è¯¥æŽ¥å£çš„å…¶ä»–åˆçº¦è°ƒç”¨ã€‚
- æŽ¥å£ä¸èƒ½æœ‰æž„é€ å‡½æ•°ï¼Œè€ŒæŠ½è±¡åˆçº¦å¯ä»¥ã€‚
- æŽ¥å£ä¸èƒ½æœ‰æŠ½è±¡åˆçº¦å¯èƒ½æœ‰çš„çŠ¶æ€å˜é‡ã€‚

## æ™ºèƒ½åˆçº¦ç¤ºä¾‹

å¯¹äºŽæŽ¥ä¸‹æ¥çš„å‡ ä¸ª Solidity æ¦‚å¿µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹æ™ºèƒ½åˆçº¦ã€‚è¿™éƒ¨åˆ†æ˜¯å› ä¸ºè¿™ä¸ªä¾‹å­åŒ…å«äº†ä¸€ä¸ªåœ¨çŽ°å®žä¸–ç•Œä¸­å®žé™…ä½¿ç”¨çš„æ™ºèƒ½åˆçº¦ã€‚æˆ‘é€‰æ‹©å®ƒä¹Ÿæ˜¯å› ä¸ºæˆ‘å¯¹ Chainlink Labs æœ‰æ˜Žæ˜¾çš„åè§ï¼Œå› ä¸ºæˆ‘åœ¨é‚£é‡Œå·¥ä½œ (ðŸ˜†) è€Œä¸”å®ƒå¾ˆæ£’ã€‚ä½†è¿™ä¹Ÿæ˜¯æˆ‘å­¦åˆ°å¾ˆå¤š Solidity çš„åœ°æ–¹ï¼Œè€Œä¸”é€šè¿‡çœŸå®žä¸–ç•Œçš„ä¾‹å­å­¦ä¹ æ€»æ˜¯æ›´å¥½ã€‚

å› æ­¤ï¼Œè¯·å…ˆé˜…è¯»ä¸‹é¢çš„ä»£ç å’Œè¯„è®ºã€‚å¦‚æžœæ‚¨ä»”ç»†é˜…è¯»ï¼Œæ‚¨å·²ç»äº†è§£äº†ç†è§£ä»¥ä¸‹åˆåŒæ‰€éœ€å†…å®¹çš„ 99%ã€‚ç„¶åŽç»§ç»­ä»Žè¿™ä»½åˆåŒä¸­å­¦åˆ°çš„å…³é”®çŸ¥è¯†ã€‚

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.7;

import "@chainlink/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol";

contract PriceConsumerV3 {
    AggregatorV3Interface internal priceFeed;

    /**
     * Network: Goerli
     * Aggregator: ETH/USD
     * Address: 0xD4a33860578De61DBAbDc8BFdb98FD742fA7028e
     */
    constructor() {
        priceFeed = AggregatorV3Interface(0xD4a33860578De61DBAbDc8BFdb98FD742fA7028e);
    }
   

     /**
     * Returns the latest price
     */
    function getLatestPrice() public view returns (int) {
        (
            /*uint80 roundID*/,
            int price,
            /*uint startedAt*/,
            /*uint timeStamp*/,
            /*uint80 answeredInRound*/
        ) = priceFeed.latestRoundData();
        return price;
    }
}
```

è¯¥æ™ºèƒ½åˆçº¦ä»Žå®žæ—¶ Chainlink ä»·æ ¼åé¦ˆé¢„è¨€æœºï¼ˆ[è¯·å‚é˜… etherscan ä¸Šçš„é¢„è¨€æœºï¼‰](https://goerli.etherscan.io/address/0xD4a33860578De61DBAbDc8BFdb98FD742fA7028e#code)[èŽ·å– 1 Eth çš„æœ€æ–°ç¾Žå…ƒä»·æ ¼](https://docs.chain.link/docs/get-the-latest-price/)ã€‚è¯¥ç¤ºä¾‹ä½¿ç”¨ Goerli ç½‘ç»œï¼Œå› æ­¤æ‚¨æœ€ç»ˆä¸ä¼šåœ¨ä»¥å¤ªåŠä¸»ç½‘ä¸ŠèŠ±è´¹çœŸé’±ã€‚

çŽ°åœ¨ï¼Œæ‚¨éœ€è¦äº†è§£ 6 ä¸ªåŸºæœ¬çš„ Solidity æ¦‚å¿µï¼š

1. åœ¨`pragma`è¯­å¥ä¹‹åŽæˆ‘ä»¬æœ‰ä¸€ä¸ª`import`è¯­å¥ã€‚è¿™ä¼šå°†çŽ°æœ‰ä»£ç å¯¼å…¥æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ã€‚

   è¿™å¤ªé…·äº†ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘ä»¬é‡ç”¨ä»–äººç¼–å†™çš„ä»£ç å¹¶ä»Žä¸­å—ç›Šçš„æ–¹å¼ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹åœ¨æ­¤[GitHub é“¾æŽ¥](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol)ä¸Šå¯¼å…¥çš„ä»£ç ã€‚

   å®žé™…ä¸Šï¼Œå½“æˆ‘ä»¬ç¼–è¯‘æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦æ—¶ï¼Œè¿™ä¸ªå¯¼å…¥çš„ä»£ç ä¼šè¢«æ‹‰å…¥å¹¶ä¸Žå®ƒä¸€èµ·ç¼–è¯‘æˆå­—èŠ‚ç ã€‚æˆ‘ä»¬é©¬ä¸Šå°±ä¼šæ˜Žç™½ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å®ƒâ€¦â€¦

2. ä¹‹å‰æ‚¨çœ‹åˆ°å•è¡Œæ³¨é‡Šæ ‡æœ‰`//`ã€‚çŽ°åœ¨ä½ æ­£åœ¨å­¦ä¹ å¤šè¡Œæ³¨é‡Šã€‚å®ƒä»¬å¯ä»¥è·¨è¶Šä¸€è¡Œæˆ–å¤šè¡Œå¹¶ä½¿ç”¨`/*`and`*/`æ¥å¼€å§‹å’Œç»“æŸæ³¨é‡Šã€‚

3. æˆ‘ä»¬å£°æ˜Žä¸€ä¸ªå˜é‡å«åš`priceFeed`å¹¶ä¸”å®ƒçš„ç±»åž‹æ˜¯`AggregatorV3Interface`ã€‚ä½†æ˜¯è¿™ç§å¥‡æ€ªçš„ç±»åž‹æ˜¯ä»Žå“ªé‡Œæ¥çš„å‘¢ï¼Ÿæ¥è‡ªæˆ‘ä»¬å¯¼å…¥è¯­å¥ä¸­çš„å¯¼å…¥ä»£ç â€”â€”æˆ‘ä»¬å¼€å§‹ä½¿ç”¨è¯¥`AggregatorV3Interface`ç±»åž‹ï¼Œå› ä¸º Chainlink å®šä¹‰äº†å®ƒã€‚

   å¦‚æžœæ‚¨æŸ¥çœ‹è¯¥ Github é“¾æŽ¥ï¼Œæ‚¨ä¼šçœ‹åˆ°è¯¥ç±»åž‹å®šä¹‰äº†ä¸€ä¸ªæŽ¥å£ï¼ˆæˆ‘ä»¬åˆšåˆšè®¨è®ºå®Œäº†æŽ¥å£ï¼‰ã€‚æ‰€ä»¥`priceFeed`æ˜¯å¯¹æŸä¸ª`AggregatorV3Interface`ç±»åž‹å¯¹è±¡çš„å¼•ç”¨ã€‚

4. çœ‹ä¸€ä¸‹æž„é€ å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¸æŽ¥å—å‚æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å°† ETH/USD  Price Feedçš„ oracle æ™ºèƒ½åˆçº¦åœ°å€`0xD4a33860578De61DBAbDc8BFdb98FD742fA7028e`ä½œä¸ºåœ°å€ç±»åž‹çš„å‚æ•°ä¼ ç»™å®ƒã€‚ç›¸åï¼Œæˆ‘ä»¬åœ¨æž„é€ å‡½æ•°ä¸­ç¡¬ç¼–ç äº†åœ°å€ã€‚

   ä½†æˆ‘ä»¬ä¹Ÿæ­£åœ¨åˆ›å»ºå¯¹ Price Feed Aggregator æ™ºèƒ½åˆçº¦çš„å¼•ç”¨ï¼ˆä½¿ç”¨åä¸º çš„æŽ¥å£`AggregatorV3Interface`ï¼‰ã€‚

   çŽ°åœ¨æˆ‘ä»¬å¯ä»¥è°ƒç”¨ `AggregatorV3Interface`ä¸Šå¯ç”¨çš„æ‰€æœ‰æ–¹æ³•ï¼Œå› ä¸º`priceFeed`å˜é‡æŒ‡çš„æ˜¯è¯¥æ™ºèƒ½åˆçº¦ã€‚äº‹å®žä¸Šï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥è¦åšçš„æ˜¯â€¦â€¦

5. è®©æˆ‘ä»¬è·³è½¬åˆ°å‡½æ•°`getLatestPrice()`ã€‚ä½ ä¼šä»Žæˆ‘ä»¬åœ¨`HotFudgeSauce `ä¸­çš„è®¨è®ºä¸­è®¤å‡ºå®ƒçš„ç»“æž„ï¼Œä½†å®ƒæ­£åœ¨åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚

   åœ¨è¿™ä¸ª`getLatestPrice()`å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨ç±»åž‹`AggregatorV3Interface`ä¸Šå­˜åœ¨çš„å‡½æ•°`latestRoundData()`ã€‚å¦‚æžœæ‚¨[æŸ¥çœ‹æ­¤æ–¹æ³•çš„æºä»£ç ï¼Œ](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/interfaces/AggregatorV3Interface.sol#L22)æ‚¨ä¼šæ³¨æ„åˆ°æ­¤  `latestRoundData()`å‡½æ•°è¿”å›ž 5 ç§ä¸åŒç±»åž‹çš„æ•´æ•°ï¼

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/20221221163327.png)

ä»Žæˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ™ºèƒ½åˆçº¦çš„æ–¹æ³•

åœ¨æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ä¸­ï¼Œæˆ‘ä»¬æ³¨é‡ŠæŽ‰äº†æˆ‘ä»¬ä¸éœ€è¦çš„æ‰€æœ‰ 4 ä¸ªå€¼ã€‚æ‰€ä»¥è¿™æ„å‘³ç€ Solidity å‡½æ•°å¯ä»¥è¿”å›žå¤šä¸ªå€¼ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬è¿”å›žäº† 5 ä¸ªå€¼ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‘é€‰æˆ‘ä»¬æƒ³è¦çš„ã€‚  

å¦ä¸€ç§æ¶ˆè€—è°ƒç”¨` latestRoundData()` çš„ç»“æžœçš„æ–¹å¼æ˜¯ï¼š`(,int price, , , ) = priceFeed.latestRoundData() `å…¶ä¸­æˆ‘ä»¬é€šè¿‡ä¸ç»™å®ƒä»¬ä¸€ä¸ªå˜é‡åè€Œå¿½ç•¥äº†5ä¸ªè¿”å›žå€¼ä¸­çš„4ä¸ªã€‚

å½“æˆ‘ä»¬ç»™ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°è¿”å›žçš„å€¼åˆ†é…å˜é‡åæ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º "æžæž„èµ‹å€¼"ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹è¿”å›žçš„å€¼è¿›è¡Œäº†æžæž„ï¼ˆå°†æ¯ä¸ªå€¼åˆ†ç¦»å‡ºæ¥ï¼‰ï¼Œå¹¶åœ¨æžæž„æ—¶å¯¹å…¶è¿›è¡Œèµ‹å€¼ï¼Œå°±åƒæˆ‘ä»¬å¯¹ä¸Šé¢çš„`price`æ‰€åšçš„é‚£æ ·ã€‚

æ—¢ç„¶ä½ å·²ç»äº†è§£äº†æŽ¥å£ï¼Œæˆ‘å»ºè®®ä½ çœ‹ä¸€ä¸‹Chainlink Labsçš„[GitHub](https://github.com/smartcontractkit/)å­˜å‚¨åº“ï¼Œçœ‹çœ‹åœ¨Aggregatoræ£€æŸ¥[åˆçº¦ä¸­å®žçŽ°](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.6/AggregatorProxy.sol#L211)[çš„](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.6/AggregatorProxy.sol#L211)çš„`latestRoundData()`å‡½æ•°ï¼Œä»¥åŠ`AggregatorV3Interface`å¦‚ä½•æä¾›ä¸Ž`Aggregator`åˆçº¦äº¤äº’çš„æŽ¥å£ã€‚

## ä»€ä¹ˆæ˜¯åˆçº¦çŠ¶æ€ï¼Ÿ

åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œé‡è¦çš„æ˜¯è¦ç¡®ä¿æˆ‘ä»¬å°†ç»å¸¸çœ‹åˆ°çš„æœ¯è¯­å¯¹æ‚¨æ¥è¯´æ˜¯å¯ä»¥ç†è§£çš„ã€‚

è®¡ç®—æœºç§‘å­¦ä¸­çš„â€œçŠ¶æ€â€å…·æœ‰[æ˜Žç¡®çš„å«ä¹‰](https://en.wikipedia.org/wiki/State_(computer_science))ã€‚è™½ç„¶å®ƒä¼šå˜å¾—éžå¸¸æ··ä¹±ï¼Œä½†çŠ¶æ€çš„å…³é”®åœ¨äºŽå®ƒæŒ‡çš„æ˜¯ç¨‹åºåœ¨è¿è¡Œæ—¶â€œè®°ä½â€çš„æ‰€æœ‰ä¿¡æ¯ã€‚æ­¤ä¿¡æ¯å¯ä»¥æ›´æ”¹ã€æ›´æ–°ã€åˆ é™¤ã€åˆ›å»ºç­‰ã€‚è€Œä¸”ï¼Œå¦‚æžœæ‚¨åœ¨ä¸åŒæ—¶é—´ä¸ºå…¶æ‹æ‘„å¿«ç…§ï¼Œä¿¡æ¯å°†å¤„äºŽä¸åŒçš„â€œçŠ¶æ€â€ã€‚

æ‰€ä»¥çŠ¶æ€åªæ˜¯ç¨‹åºçš„å½“å‰å¿«ç…§ï¼Œåœ¨å…¶æ‰§è¡ŒæœŸé—´çš„æŸä¸ªæ—¶é—´ç‚¹ - å®ƒçš„å˜é‡æŒæœ‰ä»€ä¹ˆå€¼ï¼Œå®ƒä»¬åœ¨åšä»€ä¹ˆï¼Œå·²ç»åˆ›å»ºæˆ–åˆ é™¤äº†å“ªäº›å¯¹è±¡ï¼Œç­‰ç­‰ã€‚

æˆ‘ä»¬ä¹‹å‰å·²ç»ç ”ç©¶äº†ä¸‰ç§ç±»åž‹çš„å˜é‡â€”â€”çŠ¶æ€å˜é‡ã€å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ã€‚çŠ¶æ€å˜é‡ä»¥åŠå…¨å±€å˜é‡ä¸ºæˆ‘ä»¬æä¾›äº†æ™ºèƒ½åˆçº¦åœ¨ä»»ä½•ç»™å®šæ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œæ™ºèƒ½åˆçº¦çš„çŠ¶æ€æ˜¯å¯¹ä»¥ä¸‹å†…å®¹çš„æè¿°ï¼š

1. å®ƒçš„çŠ¶æ€å˜é‡æŒæœ‰ä»€ä¹ˆå€¼ï¼Œ
2. åŒºå—é“¾ç›¸å…³çš„å…¨å±€å˜é‡åœ¨é‚£ä¸ªæ—¶åˆ»æœ‰ä»€ä¹ˆå€¼ï¼Œä»¥åŠ
3. æ™ºèƒ½åˆçº¦è´¦æˆ·ä¸­çš„ä½™é¢ï¼ˆå¦‚æžœæœ‰ï¼‰ã€‚

## çŠ¶æ€å¯å˜å…³é”®å­—ï¼ˆä¿®é¥°ç¬¦ï¼‰

çŽ°åœ¨æˆ‘ä»¬å·²ç»è®¨è®ºäº†çŠ¶æ€ã€çŠ¶æ€å˜é‡å’Œå‡½æ•°ï¼Œè®©æˆ‘ä»¬äº†è§£æŒ‡å®šå…è®¸æˆ‘ä»¬å¯¹çŠ¶æ€æ‰§è¡Œçš„æ“ä½œçš„ Solidity å…³é”®å­—ã€‚  

è¿™äº›å…³é”®å­—ç§°ä¸º[ä¿®é¥°ç¬¦](https://docs.soliditylang.org/en/v0.8.17/cheatsheet.html#modifiers)ã€‚ä½†å¹¶éžæ‰€æœ‰è¿™äº›éƒ½å…è®¸æ‚¨ä¿®æ”¹çŠ¶æ€ã€‚äº‹å®žä¸Šï¼Œä»–ä»¬ä¸­çš„è®¸å¤šäººæ˜Žç¡®*ç¦æ­¢*ä¿®æ”¹ã€‚

ä»¥ä¸‹æ˜¯æ‚¨å°†åœ¨ä»»ä½•çŽ°å®žä¸–ç•Œçš„æ™ºèƒ½åˆçº¦ä¸­çœ‹åˆ°çš„ Solidity ä¿®æ”¹å™¨ï¼š

| **ä¿®é¥°ç¬¦å…³é”®å­—** | **é€‚ç”¨äºŽâ€¦**     | **ç›®çš„**                                                     |
| ---------------- | --------------- | ------------------------------------------------------------ |
| constant         | State variables | å£°æ˜ŽåŒæ—¶å¹¶èµ‹å€¼ä¸€æ¬¡ã€‚ç¡¬ç¼–ç æˆä»£ç ã€‚å®ƒçš„ç»™å®šå€¼æ°¸è¿œä¸èƒ½æ”¹å˜ã€‚ å½“æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå€¼æ°¸è¿œä¸ä¼šæ”¹å˜æ—¶ä½¿ç”¨ - ä¾‹å¦‚ï¼Œå¦‚æžœæˆ‘ä»¬æ°¸è¿œä¸ä¼šï¼ˆæ°¸è¿œï¼‰å…è®¸ç”¨æˆ·è´­ä¹°è¶…è¿‡ 50 å•ä½çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥å°† 50 å£°æ˜Žä¸ºå¸¸é‡å€¼ã€‚ |
| immutable        | State variables | è¿™äº›æ˜¯åœ¨æ™ºèƒ½åˆçº¦çš„é¡¶éƒ¨å£°æ˜Žçš„ï¼Œä½†åœ¨æž„é€ æ—¶ç»™å®šå®ƒä»¬çš„å€¼ï¼ˆä»…ä¸€æ¬¡ï¼ï¼‰â€”â€”å³é€šè¿‡æž„é€ å‡½æ•°ã€‚ä¸€æ—¦ä»–ä»¬æ”¶åˆ°ä»–ä»¬çš„ä»·å€¼ï¼Œä»–ä»¬ï¼ˆæœ‰æ•ˆåœ°ï¼‰æ˜¯å¸¸é‡ã€‚å¹¶ä¸”å®ƒä»¬çš„å€¼å®žé™…ä¸Šå­˜å‚¨åœ¨ä»£ç æœ¬èº«è€Œä¸æ˜¯å­˜å‚¨æ§½ä¸­ï¼ˆå­˜å‚¨å°†åœ¨åŽé¢è§£é‡Šï¼‰ã€‚ |
| view             | functions       | æ‚¨é€šå¸¸ä¼šåœ¨å¯è§æ€§è¯´æ˜Žç¬¦ä¹‹åŽç«‹å³çœ‹åˆ°å®ƒã€‚è§†å›¾ä¿®é¥°ç¬¦æ„å‘³ç€è¯¥å‡½æ•°åªèƒ½â€œæŸ¥çœ‹â€ï¼ˆè¯»å–ï¼‰åˆçº¦çŠ¶æ€ï¼Œä½†ä¸èƒ½æ›´æ”¹å®ƒï¼ˆä¸èƒ½â€œå†™å…¥â€åˆçº¦çŠ¶æ€ï¼‰ã€‚è¿™å®žé™…ä¸Šæ˜¯ä¸€ä¸ªåªè¯»ä¿®é¥°ç¬¦ã€‚å¦‚æžœè¯¥å‡½æ•°éœ€è¦ä½¿ç”¨åˆçº¦çŠ¶æ€ä¸­çš„ä»»ä½•å€¼ï¼Œä½†ä¸ä¿®æ”¹è¯¥å€¼ï¼Œåˆ™å®ƒå°†æ˜¯ä¸€ä¸ªè§†å›¾å‡½æ•°ã€‚ |
| pure             | functions       | çº¯å‡½æ•°ä¸å…è®¸å†™å…¥ï¼ˆä¿®æ”¹ï¼‰åˆçº¦çŠ¶æ€ï¼Œç”šè‡³ä¸å…è®¸ä»Žä¸­è¯»å–ï¼ä»–ä»¬åšçš„äº‹æƒ…ä¸ä¼šä»¥ä»»ä½•æ–¹å¼ä¸ŽåŒºå—é“¾çŠ¶æ€äº¤äº’ã€‚é€šå¸¸è¿™äº›å¯ä»¥æ˜¯è¾…åŠ©å‡½æ•°ï¼Œå¯ä»¥è¿›è¡Œä¸€äº›è®¡ç®—æˆ–å°†ä¸€ç§æ•°æ®ç±»åž‹çš„è¾“å…¥è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»åž‹ç­‰ã€‚ |
| payable          | functions       | è¯¥å…³é”®å­—ä½¿å‡½æ•°èƒ½å¤ŸæŽ¥æ”¶ Ethã€‚æ²¡æœ‰è¿™ä¸ªå…³é”®å­—ï¼Œä½ å°±ä¸èƒ½åœ¨è°ƒç”¨å‡½æ•°æ—¶å‘é€ Ethã€‚è¯·æ³¨æ„ï¼Œåœ¨ Solidity ç‰ˆæœ¬ 0.8.17 ä¸­ï¼Œæœ‰[é‡å¤§æ›´æ”¹](https://docs.soliditylang.org/en/v0.8.17/080-breaking-changes.html?highlight=payable address#new-restrictions)å…è®¸ä½¿ç”¨ payable ä½œä¸ºæ•°æ®ç±»åž‹ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬çŽ°åœ¨å…è®¸é€šè¿‡æ‰§è¡Œç±»ä¼¼äºŽpayable( 0xdCad3a6d3569DF655070DEd06cb7A1b2Ccd1D3AF )çš„ç±»åž‹è½¬æ¢ï¼Œå°†åœ°å€æ•°æ®ç±»åž‹è½¬æ¢ä¸ºpayableåœ°å€ç±»åž‹ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä½¿ç»™å®šçš„ä»¥å¤ªåŠåœ°å€æˆä¸ºå¯æ”¯ä»˜çš„ï¼Œä¹‹åŽæˆ‘ä»¬å¯ä»¥å°†ä»¥å¤ªå¸å‘é€åˆ°è¯¥åœ°å€ã€‚       è¯·æ³¨æ„ï¼Œpayable çš„è¿™ç§ç”¨æ³•æ˜¯ä¸€ç§ç±»åž‹è½¬æ¢ï¼Œä¸Žå‡½æ•°ä¿®é¥°ç¬¦ä¸åŒï¼Œå°½ç®¡ä½¿ç”¨äº†ç›¸åŒçš„å…³é”®å­—ã€‚[æˆ‘ä»¬ç¨åŽä¼šä»‹ç»åœ°å€ç±»åž‹ï¼Œä½†æ‚¨å¯ä»¥åœ¨æ­¤å¤„](https://docs.soliditylang.org/en/v0.8.16/types.html#address)é˜…è¯»ç›¸å…³å†…å®¹ã€‚ |
| virtual          | functions       | è¿™æ˜¯ä¸€ä¸ªç¨å¾®é«˜çº§çš„ä¸»é¢˜ï¼Œåœ¨ç»§æ‰¿éƒ¨åˆ†æœ‰è¯¦ç»†ä»‹ç»ã€‚è¿™ä¸ªä¿®é¥°ç¬¦å…è®¸å‡½æ•°åœ¨ä»Žå®ƒç»§æ‰¿çš„å­åˆçº¦ä¸­è¢«â€œè¦†ç›–â€ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªå¸¦æœ‰å…³é”®å­—virtualçš„å‡½æ•°å¯ä»¥åœ¨å¦ä¸€ä¸ªç»§æ‰¿è‡ªè¿™ä¸ªåˆçº¦çš„åˆçº¦ä¸­ç”¨ä¸åŒçš„å†…éƒ¨é€»è¾‘â€œé‡å†™â€ã€‚ |
| override         | functions       | è¿™æ˜¯è™šæ‹Ÿä¿®æ”¹å™¨çš„åé¢ã€‚å½“å­åˆçº¦â€œé‡å†™â€åœ¨å®ƒç»§æ‰¿çš„åŸºç¡€åˆçº¦ï¼ˆçˆ¶åˆçº¦ï¼‰ä¸­å£°æ˜Žçš„å‡½æ•°æ—¶ï¼Œå®ƒä¼šç”¨è¦†ç›–æ ‡è®°é‡å†™çš„å‡½æ•°ï¼Œä»¥è¡¨æ˜Žå…¶å®žçŽ°è¦†ç›–äº†çˆ¶åˆçº¦ä¸­ç»™å‡ºçš„å‡½æ•°ã€‚å¦‚æžœçˆ¶é¡¹çš„è™šå‡½æ•°æ²¡æœ‰è¢«å­é¡¹è¦†ç›–ï¼Œåˆ™çˆ¶é¡¹çš„å®žçŽ°å°†åº”ç”¨äºŽå­é¡¹ã€‚ |
| indexed          | events          | æˆ‘ä»¬å°†åœ¨æœ¬æ‰‹å†ŒåŽé¢ä»‹ç»äº‹ä»¶ã€‚å®ƒä»¬æ˜¯ç”±æ™ºèƒ½åˆçº¦â€œå‘å‡ºâ€çš„å°æ•°æ®åŒ…ï¼Œé€šå¸¸æ˜¯ä¸ºäº†å“åº”å‘ç”Ÿçš„å€¼å¾—æ³¨æ„çš„äº‹ä»¶ã€‚indexedå…³é”®å­—è¡¨ç¤ºäº‹ä»¶ä¸­åŒ…å«çš„å…¶ä¸­ä¸€æ¡æ•°æ®åº”å­˜å‚¨åœ¨åŒºå—é“¾ä¸­ï¼Œä»¥ä¾›ä»¥åŽæ£€ç´¢å’Œè¿‡æ»¤ã€‚ä¸€æ—¦æˆ‘ä»¬åœ¨æœ¬æ‰‹å†ŒåŽé¢ä»‹ç»äº†äº‹ä»¶å’Œæ—¥å¿—è®°å½•ï¼Œè¿™å°†æ›´æœ‰æ„ä¹‰ã€‚ |
| anonymous        | events          | [æ–‡æ¡£ä¸­](https://docs.soliditylang.org/en/v0.8.17/cheatsheet.html#modifiers)è¯´â€œä¸å°†äº‹ä»¶ç­¾åå­˜å‚¨ä¸ºä¸»é¢˜â€ï¼Œè¿™å¯¹æ‚¨æ¥è¯´å¯èƒ½æ„ä¹‰ä¸å¤§ã€‚ä½†å…³é”®å­—ç¡®å®žè¡¨æ˜Žå®ƒä½¿äº‹ä»¶çš„æŸäº›éƒ¨åˆ†â€œåŒ¿åâ€ã€‚å› æ­¤ï¼Œä¸€æ—¦æˆ‘ä»¬ç†è§£äº†æœ¬æ‰‹å†ŒåŽé¢çš„äº‹ä»¶å’Œä¸»é¢˜ï¼Œè¿™å°±æœ‰æ„ä¹‰äº†ã€‚ |

è¯·æ³¨æ„ï¼Œä¸æ˜¯å­˜å‚¨å˜é‡çš„å˜é‡ï¼ˆå³åœ¨ç»™å®šå‡½æ•°èŒƒå›´å†…å£°æ˜Žå’Œä½¿ç”¨çš„å±€éƒ¨å˜é‡ï¼‰ä¸éœ€è¦çŠ¶æ€ä¿®é¥°ç¬¦ã€‚è¿™æ˜¯å› ä¸ºå®ƒä»¬å®žé™…ä¸Šå¹¶ä¸æ˜¯æ™ºèƒ½åˆçº¦çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚å®ƒä»¬åªæ˜¯è¯¥å‡½æ•°å†…éƒ¨å±€éƒ¨çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚é‚£ä¹ˆæ ¹æ®å®šä¹‰ï¼Œå®ƒä»¬æ˜¯å¯ä¿®æ”¹çš„å¹¶ä¸”ä¸éœ€è¦å¯¹å…¶å¯ä¿®æ”¹æ€§è¿›è¡ŒæŽ§åˆ¶ã€‚

## æ•°æ®ä½ç½®â€”â€”å­˜å‚¨ã€å†…å­˜å’Œå †æ ˆ

åœ¨ä»¥å¤ªåŠå’ŒåŸºäºŽ EVM çš„é“¾ä¸Šï¼Œç³»ç»Ÿå†…çš„æ•°æ®å¯ä»¥åœ¨å¤šä¸ªâ€œæ•°æ®ä½ç½®â€æ”¾ç½®å’Œè®¿é—®ã€‚  

æ•°æ®ä½ç½®æ˜¯EVMçš„åŸºæœ¬è®¾è®¡å’Œæž¶æž„çš„ä¸€éƒ¨åˆ†ã€‚å½“ä½ çœ‹åˆ° "å†…å­˜"ã€"å­˜å‚¨ "å’Œ "å †æ ˆ "è¿™äº›è¯æ—¶ï¼Œä½ åº”è¯¥å¼€å§‹æ€è€ƒ "æ•°æ®ä½ç½®"--ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®å¯ä»¥è¢«å­˜å‚¨ï¼ˆå†™å…¥ï¼‰åˆ°å“ªé‡Œï¼Œä»¥åŠä»Žå“ªé‡Œæ£€ç´¢ï¼ˆè¯»å–ï¼‰ã€‚

æ•°æ®ä½ç½®ä¼šå½±å“ä»£ç åœ¨è¿è¡Œæ—¶çš„æ‰§è¡Œæ–¹å¼ã€‚ä½†å®ƒå¯¹æ™ºèƒ½åˆçº¦åœ¨éƒ¨ç½²å’Œè¿è¡ŒæœŸé—´ä½¿ç”¨ çš„[æ°”ä½“é‡](https://ethereum.org/en/developers/docs/gas/)ä¹Ÿæœ‰éžå¸¸é‡è¦çš„å½±å“ã€‚

gas çš„ä½¿ç”¨éœ€è¦å¯¹ EVM å’Œç§°ä¸ºæ“ä½œç çš„ä¸œè¥¿æœ‰æ›´æ·±å…¥çš„äº†è§£â€”â€”æˆ‘ä»¬å¯ä»¥æš‚æ—¶æç½®è¿™ä¸ªè®¨è®ºã€‚è™½ç„¶æœ‰ç”¨ï¼Œä½†æ‚¨å¹¶éžç»å¯¹æœ‰å¿…è¦äº†è§£æ•°æ®ä½ç½®ã€‚

è™½ç„¶åˆ°ç›®å‰ä¸ºæ­¢æˆ‘å·²ç»æåˆ°äº† 3 ä¸ªæ•°æ®*ä½ç½®ï¼Œä½†è¿˜æœ‰ 2 ç§å…¶ä»–æ–¹å¼å¯ä»¥åœ¨æ™ºèƒ½åˆçº¦ä¸­å­˜å‚¨å’Œè®¿é—®æ•°æ®ï¼šâ€œcalldataâ€å’Œâ€œcodeâ€ã€‚*ä½†è¿™äº›ä¸æ˜¯ EVM è®¾è®¡ä¸­çš„æ•°æ®ä½ç½®ã€‚å®ƒä»¬åªæ˜¯ 3 ä¸ªæ•°æ®ä½ç½®çš„å­é›†ã€‚

è®©æˆ‘ä»¬ä»Žå­˜å‚¨å¼€å§‹ã€‚åœ¨ EVM çš„è®¾è®¡ä¸­ï¼Œéœ€è¦æ°¸ä¹…å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šçš„æ•°æ®è¢«æ”¾ç½®åœ¨ç›¸å…³æ™ºèƒ½åˆçº¦çš„â€œå­˜å‚¨â€åŒºåŸŸã€‚è¿™åŒ…æ‹¬ä»»ä½•åˆçº¦â€œçŠ¶æ€å˜é‡â€ã€‚  

ä¸€æ—¦éƒ¨ç½²äº†åˆçº¦å¹¶æ‹¥æœ‰äº†å®ƒçš„ç‰¹å®šåœ°å€ï¼Œå®ƒä¹Ÿä¼šèŽ·å¾—è‡ªå·±çš„å­˜å‚¨åŒºåŸŸï¼Œä½ å¯ä»¥å°†å…¶è§†ä¸ºé”®å€¼å­˜å‚¨ï¼ˆå¦‚å“ˆå¸Œè¡¨ï¼‰ï¼Œå…¶ä¸­**é”®** å’Œå€¼éƒ½æ˜¯ 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰æ•°æ®â€œè¯â€ã€‚è€Œâ€œè¯â€åœ¨è®¡ç®—æœºä½“ç³»ç»“æž„ä¸­[å…·æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚](https://en.wikipedia.org/wiki/Word_(computer_architecture))

ç”±äºŽå­˜å‚¨å°†æ•°æ®æ°¸ä¹…ä¿å­˜åœ¨åŒºå—é“¾ä¸Šï¼Œå› æ­¤æ‰€æœ‰æ•°æ®éƒ½éœ€è¦åœ¨ç½‘ç»œä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´åŒæ­¥ï¼Œè¿™å°±æ˜¯èŠ‚ç‚¹å¿…é¡»å°±æ•°æ®çŠ¶æ€è¾¾æˆå…±è¯†çš„åŽŸå› ã€‚è¿™ç§å…±è¯†ä½¿å­˜å‚¨ä½¿ç”¨èµ·æ¥å¾ˆæ˜‚è´µã€‚

æ‚¨å·²ç»çœ‹åˆ°äº†å­˜å‚¨å˜é‡ï¼ˆä¹Ÿç§°ä¸ºåˆçº¦çŠ¶æ€å˜é‡ï¼‰çš„ç¤ºä¾‹ï¼Œä½†è¿™é‡Œæ˜¯å–è‡ª[Chainlink å¯éªŒè¯éšæœºæ•°æ¶ˆè´¹è€…æ™ºèƒ½åˆçº¦çš„ç¤ºä¾‹](https://github.com/smartcontractkit/chainlink/blob/develop/contracts/src/v0.8/VRFConsumerBaseV2.sol)

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/20221221163945.png)

å­˜å‚¨æ•°æ®ä½ç½®ã€‚å°†æ•°æ®æ”¾å…¥åˆçº¦çš„å­˜å‚¨å¸ƒå±€ä¸­ã€‚

å½“åˆ›å»ºå’Œéƒ¨ç½²ä¸Šè¿°åˆçº¦æ—¶ï¼Œä¼ é€’ç»™åˆçº¦æž„é€ å‡½æ•°çš„ä»»ä½•åœ°å€éƒ½ä¼šæ°¸ä¹…å­˜å‚¨åœ¨æ™ºèƒ½åˆçº¦çš„å­˜å‚¨ä¸­ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å˜é‡`vrfCoodinator`è®¿é—®ã€‚ç”±äºŽæ­¤çŠ¶æ€å˜é‡æ ‡è®°ä¸º`immutable`ï¼Œå› æ­¤æ­¤åŽæ— æ³•æ›´æ”¹ã€‚

ä¸ºäº†è®©æ‚¨ä»Žä¸Šä¸€èŠ‚å…³äºŽå…³é”®å­—ï¼ˆæˆ‘ä»¬ä¸Šæ¬¡è®¨è®ºçš„å…³é”®å­—`immutable`å’Œ`constant`å˜é‡ï¼‰çš„è®°å¿†ä¸­æ¢å¤è¿‡æ¥ï¼Œè¿™äº›å€¼æ²¡æœ‰å­˜å‚¨ã€‚åœ¨æž„é€ åˆçº¦æ—¶ï¼Œå®ƒä»¬æˆä¸ºä»£ç æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™äº›å€¼ä¸ä¼šåƒå­˜å‚¨å˜é‡é‚£æ ·æ¶ˆè€—é‚£ä¹ˆå¤šçš„æ°”ä½“ã€‚

çŽ°åœ¨è®©æˆ‘ä»¬è½¬åˆ°`memory`. è¿™æ˜¯ä¸´æ—¶å­˜å‚¨ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­è¯»å–å’Œå†™å…¥æ™ºèƒ½åˆçº¦è¿è¡ŒæœŸé—´æ‰€éœ€çš„æ•°æ®ã€‚ä¸€æ—¦ä½¿ç”¨è¯¥æ•°æ®çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œè¯¥æ•°æ®å°†è¢«æ“¦é™¤ã€‚  

`memory`ä½ç½®ç©ºé—´å°±åƒä¸€ä¸ªä¸´æ—¶è®°äº‹æœ¬ï¼Œæ¯æ¬¡è§¦å‘å‡½æ•°æ—¶éƒ½ä¼šåœ¨æ™ºèƒ½åˆçº¦ä¸­æä¾›ä¸€ä¸ªæ–°çš„è®°äº‹æœ¬ã€‚æ‰§è¡Œå®ŒæˆåŽï¼Œè¯¥è®°äº‹æœ¬å°†è¢«ä¸¢å¼ƒã€‚

åœ¨ç†è§£å­˜å‚¨å’Œå†…å­˜çš„åŒºåˆ«æ—¶ï¼Œæ‚¨å¯ä»¥å°†å­˜å‚¨è§†ä¸ºä¼ ç»Ÿè®¡ç®—ä¸–ç•Œä¸­çš„ä¸€ç§ç¡¬ç›˜ï¼Œå› ä¸ºå®ƒå…·æœ‰â€œæŒä¹…â€å­˜å‚¨æ•°æ®çš„æ„ä¹‰ã€‚ä½†å†…å­˜åœ¨ä¼ ç»Ÿè®¡ç®—ä¸­æ›´æŽ¥è¿‘ RAMã€‚  

`stack`æ˜¯æ‰§è¡Œå¤§å¤šæ•° EVM è®¡ç®—çš„æ•°æ®åŒºåŸŸã€‚EVM éµå¾ªåŸºäºŽ[å †æ ˆçš„è®¡ç®—æ¨¡åž‹](https://en.wikipedia.org/wiki/Stack_machine#Comparison_with_register_machines)ï¼Œè€Œä¸æ˜¯åŸºäºŽå¯„å­˜å™¨çš„è®¡ç®—æ¨¡åž‹ï¼Œè¿™æ„å‘³ç€è¦æ‰§è¡Œçš„æ¯ä¸ªæ“ä½œéƒ½éœ€è¦ä½¿ç”¨[å †æ ˆæ•°æ®ç»“æž„](https://en.wikipedia.org/wiki/Stack_(abstract_data_type))è¿›è¡Œå­˜å‚¨å’Œè®¿é—®ã€‚

å †æ ˆçš„æ·±åº¦â€”â€”å³å®ƒå¯ä»¥å®¹çº³çš„é¡¹ç›®æ€»æ•°â€”â€”æ˜¯ 1024ï¼Œå †æ ˆä¸­çš„æ¯ä¸ªé¡¹ç›®å¯ä»¥æ˜¯ 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰é•¿ã€‚è¿™ä¸Žå­˜å‚¨æ•°æ®ä½ç½®ä¸­æ¯ä¸ªé”®å’Œå€¼çš„å¤§å°ç›¸åŒã€‚

æ‚¨å¯ä»¥åœ¨æ­¤å¤„è¯¦ç»†äº†è§£ EVM å¦‚ä½•æŽ§åˆ¶å¯¹å †æ ˆæ•°æ®å­˜å‚¨åŒºåŸŸçš„[è®¿é—®](https://docs.soliditylang.org/en/v0.8.17/introduction-to-smart-contracts.html#storage-memory-and-the-stack)ã€‚

æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥è¯´è¯´`calldata`ã€‚æˆ‘å‡è®¾æ‚¨å¯¹ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦[æ¶ˆæ¯](https://ethereum.org/en/whitepaper/#messages)å’Œ[äº¤æ˜“](https://ethereum.org/en/developers/docs/transactions/#:~:text=An Ethereum transaction refers to,takes place within a transaction.)æœ‰åŸºæœ¬çš„äº†è§£ã€‚å¦‚æžœä¸è¿™æ ·åšï¼Œåˆ™åº”å…ˆé˜…è¯»è¿™äº›é“¾æŽ¥ã€‚  

æ¶ˆæ¯å’Œäº¤æ˜“æ˜¯è°ƒç”¨æ™ºèƒ½åˆçº¦å‡½æ•°çš„æ–¹å¼ï¼Œå®ƒä»¬åŒ…å«æ‰§è¡Œè¿™äº›å‡½æ•°æ‰€éœ€çš„å„ç§æ•°æ®ã€‚æ­¤æ¶ˆæ¯æ•°æ®å­˜å‚¨åœ¨åä¸º çš„å†…å­˜çš„åªè¯»éƒ¨åˆ†ä¸­`calldata`ï¼Œå…¶ä¸­åŒ…å«å‡½æ•°åç§°å’Œå‚æ•°ç­‰å†…å®¹ã€‚

è¿™ä¸Žå¤–éƒ¨å¯è°ƒç”¨å‡½æ•°ç›¸å…³ï¼Œå› ä¸ºå†…éƒ¨å‡½æ•°å’Œç§æœ‰å‡½æ•°ä¸ä½¿ç”¨è°ƒç”¨æ•°æ®ã€‚æ­¤ä½ç½®ä»…å­˜å‚¨â€œä¼ å…¥â€å‡½æ•°æ‰§è¡Œæ•°æ®å’Œå‡½æ•°å‚æ•°ã€‚

è®°ä½ï¼Œ`calldata`å°±æ˜¯å†…å­˜ï¼Œåªä¸è¿‡calldataæ˜¯åªè¯»çš„ã€‚ä½ ä¸èƒ½å‘å®ƒå†™æ•°æ®ã€‚

æœ€åŽï¼Œ`code`ä¸æ˜¯æ•°æ®ä½ç½®ï¼Œè€Œæ˜¯æŒ‡æ™ºèƒ½åˆçº¦çš„ç¼–è¯‘å­—èŠ‚ç ï¼Œå®ƒè¢«æ°¸ä¹…éƒ¨ç½²å’Œå­˜å‚¨åœ¨åŒºå—é“¾ä¸Šã€‚è¯¥å­—èŠ‚ç å­˜å‚¨åœ¨ä¸å¯å˜çš„ ROMï¼ˆåªè¯»å­˜å‚¨å™¨ï¼‰ä¸­ï¼Œå…¶ä¸­åŠ è½½äº†è¦æ‰§è¡Œçš„æ™ºèƒ½åˆçº¦çš„å­—èŠ‚ç ã€‚  

è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•è®¨è®º Solidity ä¸­ä¸å¯å˜å˜é‡å’Œå¸¸é‡å˜é‡ä¹‹é—´çš„åŒºåˆ«å—ï¼Ÿä¸å¯å˜å€¼è¢«èµ‹å€¼ä¸€æ¬¡ï¼ˆé€šå¸¸åœ¨æž„é€ å‡½æ•°ä¸­ï¼‰ï¼Œå¸¸é‡å˜é‡çš„å€¼è¢«ç¡¬ç¼–ç åˆ°æ™ºèƒ½åˆçº¦ä»£ç ä¸­ã€‚å› ä¸ºå®ƒä»¬æ˜¯ç¡¬ç¼–ç çš„ï¼Œå¸¸é‡å€¼æŒ‰å­—é¢ç¼–è¯‘å¹¶ç›´æŽ¥åµŒå…¥åˆ°æ™ºèƒ½åˆçº¦çš„å­—èŠ‚ç ä¸­ï¼Œå¹¶å­˜å‚¨åœ¨è¿™ä¸ªä»£ç /ROM æ•°æ®ä½ç½®ã€‚

å°±åƒ`calldata`ä¸€æ ·,`code`ä¹Ÿæ˜¯åªè¯»çš„ - å¦‚æžœæ‚¨ç†è§£ä¸Šä¸€æ®µï¼Œæ‚¨å°±ä¼šæ˜Žç™½ä¸ºä»€ä¹ˆ

## Typingæ˜¯å¦‚ä½•å·¥ä½œçš„

ç±»åž‹åŒ–æ˜¯ç¼–ç¨‹ä¸­ä¸€ä¸ªéžå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå› ä¸ºå®ƒæ˜¯æˆ‘ä»¬èµ‹äºˆæ•°æ®ç»“æž„çš„æ–¹å¼ã€‚ä»Žè¿™ä¸ªç»“æž„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä¸€ç§å®‰å…¨ã€ä¸€è‡´å’Œå¯é¢„æµ‹çš„æ–¹å¼å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚  

å½“ä¸€ç§è¯­è¨€å…·æœ‰ä¸¥æ ¼ç±»åž‹æ—¶ï¼Œè¿™æ„å‘³ç€è¯¥è¯­è¨€ä¸¥æ ¼å®šä¹‰äº†æ¯æ¡æ•°æ®çš„ç±»åž‹ï¼Œå¹¶ä¸”ä¸èƒ½ä¸ºå…·æœ‰ç±»åž‹çš„å˜é‡èµ‹äºˆå¦ä¸€ç§ç±»åž‹ã€‚  

æ¢å¥è¯è¯´ï¼Œåœ¨ä¸¥æ ¼ç±»åž‹çš„è¯­è¨€ä¸­ï¼š

```
int a =1  //     1 here is of the integer type
string b= "1" //  1 here is of the string type


b=a //  Nope! b is a string. It cannot hold an int value, and vice-versa!
```

ä½†åœ¨æ²¡æœ‰ç±»åž‹çš„ JavaScript ä¸­ï¼Œ`b=a`å®Œå…¨å¯ä»¥å·¥ä½œâ€”â€”è¿™ä½¿ JavaScript æˆä¸ºâ€œåŠ¨æ€ç±»åž‹â€ã€‚  

åŒæ ·ï¼Œåœ¨é™æ€ç±»åž‹è¯­è¨€ä¸­ï¼Œæ‚¨ä¸èƒ½å°†æ•´æ•°ä¼ é€’ç»™éœ€è¦å­—ç¬¦ä¸²çš„å‡½æ•°ã€‚ä½†æ˜¯åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•ä¸œè¥¿ä¼ é€’ç»™å‡½æ•°ï¼Œç¨‹åºä»ç„¶å¯ä»¥ç¼–è¯‘ï¼Œä½†åœ¨æ‰§è¡Œç¨‹åºæ—¶å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚

ä¾‹å¦‚ä»¥è¿™ä¸ªå‡½æ•°ä¸ºä¾‹ï¼š

```js
function add(a,b){
    return a + b 
}

add(1, 2) // output is 3, of type integer

add(1, "2") // â€œ2â€ is a string, not an integer, so the output becomes the string â€œ12â€ (!?)
```

å¯ä»¥æƒ³è±¡ï¼Œè¿™ä¼šäº§ç”Ÿä¸€äº›å¾ˆéš¾å‘çŽ°çš„é”™è¯¯ã€‚ä»£ç ç¼–è¯‘ç”šè‡³å¯ä»¥æ‰§è¡Œè€Œä¸ä¼šå¤±è´¥ï¼Œå°½ç®¡å®ƒä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æžœã€‚

ä½†æ˜¯å¼ºç±»åž‹è¯­è¨€æ°¸è¿œä¸ä¼šè®©ä½ ä¼ é€’å­—ç¬¦ä¸²â€œ2â€ï¼Œå› ä¸ºå‡½æ•°ä¼šåšæŒå®ƒæŽ¥å—çš„ç±»åž‹ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°åœ¨åƒ Go è¿™æ ·çš„å¼ºç±»åž‹è¯­è¨€ä¸­æ˜¯å¦‚ä½•å†™çš„

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/20221221164529.png)

typingåœ¨è¯­æ³•ä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½¿ç”¨ Golang è¿›è¡Œè¯´æ˜Ž

è¯•å›¾ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå³ä½¿å®ƒä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼‰å°†ä½¿ç¨‹åºç”šè‡³æ— æ³•ç¼–è¯‘ï¼ˆæž„å»ºï¼‰ã€‚   ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„é”™è¯¯ã€‚

```
./prog.go:13:19: cannot use "2" (untyped string constant) as int value in argument to add

Go build failed.
```

[äº²è‡ªå°è¯•ä¸€ä¸‹](https://go.dev/play/p/SrE1CXVD_pj)ï¼

æ‰€ä»¥ç±»åž‹å¾ˆé‡è¦ï¼Œå› ä¸ºå¯¹äºŽäººç±»æ¥è¯´ä¼¼ä¹Žç›¸åŒçš„æ•°æ®å¯èƒ½ä¼šè¢«è®¡ç®—æœºä»¥éžå¸¸ä¸åŒçš„æ–¹å¼æ„ŸçŸ¥ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›éžå¸¸å¥‡æ€ªçš„é”™è¯¯ã€é”™è¯¯ã€ç¨‹åºå´©æºƒï¼Œç”šè‡³æ˜¯ä¸¥é‡çš„å®‰å…¨æ¼æ´žã€‚  

ç±»åž‹è¿˜ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰ç±»åž‹ï¼Œç„¶åŽå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å±žæ€§ï¼ˆå±žæ€§ï¼‰å’Œæ“ä½œï¼ˆè¡Œä¸ºï¼‰å¯¹å…¶è¿›è¡Œç¼–ç¨‹ã€‚

ç±»åž‹ç³»ç»Ÿçš„å­˜åœ¨ä½¿å¾—äººä»¬å¯ä»¥é€šè¿‡è¯¢é—®â€œè¿™ä¸ªæ•°æ®çš„ç±»åž‹æ˜¯ä»€ä¹ˆï¼Œå®ƒåº”è¯¥èƒ½å¤Ÿåšä»€ä¹ˆï¼Ÿâ€è¿™æ ·çš„é—®é¢˜æ¥æŽ¨ç†æ•°æ®ã€‚å¹¶ä¸”æœºå™¨å¯ä»¥å®Œå…¨æŒ‰ç…§é¢„æœŸè¿›è¡Œæ“ä½œã€‚

è¿™æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜Žåœ¨ä½ æˆ‘çœ‹æ¥ç›¸åŒçš„æ•°æ®å¯èƒ½å¦‚ä½•è¢«å¤„ç†å™¨ä»¥æˆªç„¶ä¸åŒçš„æ–¹å¼è§£é‡Šã€‚å–äºŒè¿›åˆ¶æ•°å­—åºåˆ—ï¼ˆå³æ•°å­—åªèƒ½æœ‰ 0 æˆ– 1 çš„å€¼ï¼Œè¿™æ˜¯å¤„ç†å™¨ä½¿ç”¨çš„[äºŒè¿›åˆ¶ç³»ç»Ÿ](https://www.mathsisfun.com/binary-number-system.html)`1100001010100011`ï¼‰ ã€‚

å¯¹äºŽäººç±»æ¥è¯´ï¼Œä½¿ç”¨åè¿›åˆ¶ç³»ç»Ÿçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªéžå¸¸å¤§çš„æ•°å­—â€”â€”ä¹Ÿè®¸æ˜¯ 11 gazillion ä¹‹ç±»çš„ã€‚

ä½†æ˜¯å¯¹äºŽäºŒè¿›åˆ¶çš„è®¡ç®—æœºæ¥è¯´ï¼Œå®ƒä¸æ˜¯ 11 ä»»ä½•ä¸œè¥¿ã€‚è®¡ç®—æœºå°†å…¶è§†ä¸ºä¸€ä¸ª 16 ä½åºåˆ—ï¼ˆäºŒè¿›åˆ¶æ•°å­—çš„ç¼©å†™ï¼‰ï¼Œåœ¨äºŒè¿›åˆ¶ä¸­è¿™å¯èƒ½æ„å‘³ç€*æ­£æ•°*ï¼ˆæ— ç¬¦å·æ•´æ•°ï¼‰49,827 æˆ–å¸¦ç¬¦å·æ•´æ•° -15,709 æˆ–è‹±é•‘ç¬¦å· Â£ çš„ UTF-8 è¡¨ç¤ºæˆ–å…¶ä»–ä¸åŒçš„ä¸œè¥¿ï¼

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/20221221164653.png)



ä¸€ä¸ªbitåºåˆ—å¯ä»¥è¢«è®¡ç®—æœºè§£é‡Šä¸ºå…·æœ‰éžå¸¸ä¸åŒçš„å«ä¹‰ï¼ˆ[æ¥æº](https://livebook.manning.com/book/programming-with-types/chapter-1/18)ï¼‰

æ‰€ä»¥æ‰€æœ‰è¿™äº›è§£é‡Šéƒ½æ˜¯åœ¨è¯´ç±»åž‹å¾ˆé‡è¦ï¼Œå¹¶ä¸”ç±»åž‹å¯ä»¥â€œå†…ç½®â€åˆ°ä¸€ç§è¯­è¨€ä¸­**ï¼Œå³ä½¿**è¯¥è¯­è¨€ä¸ä¸¥æ ¼å¼ºåˆ¶ç±»åž‹ï¼Œå¦‚ JavaScriptã€‚  

JavaScript å·²ç»å…·æœ‰[å†…ç½®ç±»åž‹](https://www.w3schools.com/js/js_datatypes.asp)ï¼Œå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€å¯¹è±¡å’Œæ•°ç»„ã€‚ä½†æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼ŒJavaScript å¹¶ä¸åƒ Go é‚£æ ·åšæŒç±»åž‹ä¸Žé™æ€ç±»åž‹è¯­è¨€ä¸€æ ·ã€‚

çŽ°åœ¨å›žåˆ° Solidityã€‚Solidity åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸€ç§é™æ€ç±»åž‹çš„è¯­è¨€ã€‚å£°æ˜Žå˜é‡æ—¶ï¼Œè¿˜å¿…é¡»å£°æ˜Žå…¶ç±»åž‹ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æžœæ‚¨å°è¯•å°†å­—ç¬¦ä¸²ä¼ é€’ç»™éœ€è¦æ•´æ•°çš„å‡½æ•°ï¼ŒSolidity å°†ç®€å•åœ°æ‹’ç»ç¼–è¯‘ã€‚

äº‹å®žä¸Šï¼ŒSolidity å¯¹ç±»åž‹éžå¸¸ä¸¥æ ¼ã€‚ä¾‹å¦‚ï¼Œä¸åŒç±»åž‹çš„æ•´æ•°ä¹Ÿå¯èƒ½ä¼šåƒä¸‹é¢çš„ç¤ºä¾‹ä¸€æ ·ç¼–è¯‘å¤±è´¥ï¼Œå…¶ä¸­å‡½æ•°`add()`éœ€è¦ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆæ­£ï¼‰å¹¶ä¸”åªä¼šä¸Žè¯¥æ•°å­—ç›¸åŠ ï¼Œå› æ­¤å§‹ç»ˆè¿”å›žä¸€ä¸ªæ­£æ•´æ•°ã€‚ä½†æ˜¯è¿”å›žç±»åž‹è¢«æŒ‡å®šä¸º `int`è¿™æ„å‘³ç€å®ƒå¯ä»¥æ˜¯æ­£æ•°æˆ–è´Ÿæ•°ï¼  

```js
function add(uint256 a) public pure returns (int256){
        return a + 10;
    }

// The Solidity compiler complains saying:

// TypeError: Return argument type uint256 is not implicitly convertible to expected type (type of first return variable) int256.r 
```

å› æ­¤ï¼Œå°½ç®¡è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ 256 ä½æ•´æ•°ï¼Œä½†å‡½æ•°åªæŽ¥æ”¶æ— ç¬¦å·æ•´æ•°è¿™ä¸€äº‹å®žä½¿ç¼–è¯‘å™¨æŠ±æ€¨æ— ç¬¦å·æ•´æ•°ç±»åž‹*ä¸èƒ½*éšå¼è½¬æ¢ä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»åž‹ã€‚

é‚£æ˜¯ç›¸å½“ä¸¥æ ¼çš„ï¼å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡å°† return è¯­å¥é‡å†™ä¸º æ¥å¼ºåˆ¶è½¬æ¢ï¼ˆç§°ä¸ºç±»åž‹è½¬æ¢ï¼‰`return int256(a + 10)`ã€‚ä½†æ˜¯è¿™ç§è¡ŒåŠ¨éœ€è¦è€ƒè™‘ä¸€äº›é—®é¢˜ï¼Œè¿™è¶…å‡ºäº†æˆ‘ä»¬åœ¨è¿™é‡Œè®¨è®ºçš„èŒƒå›´ã€‚

çŽ°åœ¨ï¼Œè¯·è®°ä½ Solidity æ˜¯é™æ€ç±»åž‹çš„ï¼Œè¿™æ„å‘³ç€åœ¨ä»£ç ä¸­å£°æ˜Žæ¯ä¸ªå˜é‡æ—¶å¿…é¡»æ˜Žç¡®æŒ‡å®šå®ƒä»¬çš„ç±»åž‹ã€‚æ‚¨å¯ä»¥ç»„åˆç±»åž‹ä»¥å½¢æˆæ›´å¤æ‚çš„å¤åˆç±»åž‹ã€‚æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¨è®ºå…¶ä¸­ä¸€äº›å†…ç½®ç±»åž‹ã€‚

ï¼ˆæœªå®Œå¾…ç»­ï¼‰

> åŽŸæ–‡ï¼šhttps://www.freecodecamp.org/news/learn-solidity-handbook/

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/profile.jpg)