---
title: Web3æ•™ç¨‹ï¼šä»…ä»…ä¸€ä¸ªå‘¨æœ«ï¼Œåªç”¨Javascriptå°±å¯ä»¥æž„å»ºå‡ºä½ è‡ªå·±çš„DAOï¼ˆ5ï¼‰
description: null
author: æŽç•™ç™½
weight: 0
date: 2022-11-07T12:48:19.888Z
lastmod: 2022-11-07T14:08:24.912Z
tags: []
categories:
  - åŒºå—é“¾
  - WEB3.0
featuredImage: https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/202211032050628.png
---

### ç›®å½•

**ðŸ— å¼€å§‹**

- ðŸ¥‘ è®©æˆ‘ä»¬æž„å»ºä¸€äº›å¾ˆé…·çš„ä¸œè¥¿ã€‚
- ðŸ¤” ä»€ä¹ˆæ˜¯ DAOï¼Ÿ

**ðŸ’» ä¸º DAO è®¾ç½®å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº**

- ðŸ›  èŽ·å–å®¢æˆ·ç«¯ä»£ç  + èŽ·å–è®¾ç½®ã€‚
- ðŸ‘œ å°†â€œè¿žæŽ¥åˆ°é’±åŒ…â€æ·»åŠ åˆ°æ‚¨çš„ DAO ä»ªè¡¨æ¿ã€‚

**ðŸ˜Ž åˆ›å»ºä¼šå‘˜ NFT**
- ðŸŒˆ éƒ¨ç½²ä½ çš„ NFT åŒ…ã€‚
- ðŸ˜¤ éƒ¨ç½² NFT å…ƒæ•°æ®ã€‚
- ðŸ˜² è®©ç”¨æˆ·é“¸é€ ä½ çš„ NFTã€‚

**ðŸ’Ž åˆ›å»ºä»£å¸+æ²»ç†**

- ðŸ˜ˆ éƒ¨ç½² ERC-20 åˆçº¦ã€‚
- ðŸ˜‡ åœ¨ DAO Dashboard ä¸Šå±•ç¤ºä»£å¸æŒæœ‰è€…ã€‚
- ðŸ‘©â€âš–ï¸ å»ºåº“+æ²»ç†ã€‚
- âœ… è®©ç”¨æˆ·å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ã€‚

**ðŸŒŸæ”¶å°¾å·¥ä½œ**
- ðŸ¤  åˆ é™¤æ‚¨çš„ç®¡ç†å‘˜æƒé™å¹¶å¤„ç†åŸºæœ¬é”™è¯¯ã€‚
- ðŸŽ‰ å®Œæˆå¹¶åº†ç¥ã€‚


### ðŸ‘©â€âš–ï¸ å»ºåº“+æ²»ç†

æ²»ç†ä»£å¸å¾ˆé…·ï¼Œä½†å¦‚æžœäººä»¬ä¸èƒ½ç”¨å®ƒæ¥æ²»ç†ä»»ä½•ä¸œè¥¿ï¼Œå®ƒå°±æœ‰ç‚¹æ²¡ç”¨äº†ï¼æˆ‘ä»¬æŽ¥ä¸‹æ¥è¦åšçš„æ˜¯å»ºç«‹ä¸€ä¸ªæ²»ç†åˆçº¦ï¼Œè®©äººä»¬ä½¿ç”¨ä»–ä»¬çš„ä»£å¸å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨

### ðŸ“ éƒ¨ç½²æ²»ç†åˆçº¦

æˆ‘ä¸æƒ³æŠŠè¿™ä»¶äº‹æžå¾—å¤ªå¤æ‚ã€‚

å½’æ ¹ç»“åº•ï¼ŒæŠ•ç¥¨åˆçº¦å®žé™…ä¸Šæ˜¯ä¸€ç§è®©äººä»¬å¯¹äº‹ç‰©è¿›è¡ŒæŠ•ç¥¨ã€è‡ªåŠ¨è®¡ç®—è¿™äº›ç¥¨æ•°çš„æ–¹å¼ï¼Œç„¶åŽä»»ä½•æˆå‘˜éƒ½å¯ä»¥åœ¨é“¾ä¸Šæ‰§è¡Œææ¡ˆã€‚æ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦ä»»ä½•ä¸­å¿ƒæ–¹ã€‚

ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æƒ³åˆ›å»ºä¸€ä¸ªææ¡ˆï¼Œä¾‹å¦‚ *â€œå°† 1000 ä¸ªä»¤ç‰Œè½¬ç§»åˆ° EpicDesign5222 ä»¥é‡æ–°è®¾è®¡æˆ‘ä»¬çš„ç™»å½•é¡µé¢â€ã€‚* è°å¯ä»¥æŠ•ç¥¨ï¼Ÿäººä»¬éœ€è¦æŠ•ç¥¨å¤šé•¿æ—¶é—´ï¼ŸæŸäººåˆ›å»ºææ¡ˆæ‰€éœ€çš„æœ€å°‘ä»£å¸æ•°é‡æ˜¯å¤šå°‘ï¼Ÿ

æ‰€æœ‰è¿™äº›é—®é¢˜éƒ½åœ¨æˆ‘ä»¬åˆ›å»ºçš„åˆå§‹æŠ•ç¥¨åˆçº¦ä¸­å¾—åˆ°è§£ç­”

è¿™å‡ ä¹Žå°±åƒä½ æ­£åœ¨å»ºç«‹ä¸€ä¸ªå°å›½å®¶ï¼Œä½ éœ€è¦å»ºç«‹ä½ çš„åˆå§‹æ”¿åºœ + æŠ•ç¥¨ç³»ç»Ÿï¼

å‰å¾€ `8-deploy-vote.js` å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```jsx
import sdk from "./1-initialize-sdk.js";

(async () => {
  try {
    const voteContractAddress = await sdk.deployer.deployVote({
      // Give your governance contract a name.
      name: "My amazing DAO",

      // This is the location of our governance token, our ERC-20 contract!
      voting_token_address: "INSERT_TOKEN_ADDRESS",

      // These parameters are specified in number of blocks. 
      // Assuming block time of around 13.14 seconds (for Ethereum)

      // After a proposal is created, when can members start voting?
      // For now, we set this to immediately.
      voting_delay_in_blocks: 0,

      // How long do members have to vote on a proposal when it's created?
      // we will set it to 1 day = 6570 blocks
      voting_period_in_blocks: 6570,

      // The minimum % of the total supply that need to vote for
      // the proposal to be valid after the time for the proposal has ended.
      voting_quorum_fraction: 0,

      // What's the minimum # of tokens a user needs to be allowed to create a proposal?
      // I set it to 0. Meaning no tokens are required for a user to be allowed to
      // create a proposal.
      proposal_token_threshold: 0,
    });

    console.log(
      "âœ… Successfully deployed vote contract, address:",
      voteContractAddress,
    );
  } catch (err) {
    console.error("Failed to deploy vote contract", err);
  }
})();
```

æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ `deployer.deployVote` æ¥å®žé™…å»ºç«‹åˆåŒã€‚è¿™å°†éƒ¨ç½²ä¸€ä¸ªå…¨æ–°çš„æŠ•ç¥¨åˆçº¦ï¼

æ³¨æ„æˆ‘ä»¬å¦‚ä½•ç»™ `voting_token_address`ã€‚è¿™æ˜¯æˆ‘ä»¬çš„åˆçº¦ï¼Œå®ƒçŸ¥é“è¦æŽ¥å—å“ªä¸ªæ²»ç†ä»¤ç‰Œã€‚æˆ‘ä»¬ä¸å¸Œæœ›äººä»¬éšæœºå°è¯•ä½¿ç”¨ $DOGE æŠ•ç¥¨ ã€‚

æˆ‘ä»¬æœ‰ `voting_delay_in_blocks`ï¼Œå¦‚æžœæ‚¨æƒ³åœ¨äººä»¬è¢«å…è®¸å¯¹å…¶è¿›è¡ŒæŠ•ç¥¨ä¹‹å‰ç»™ä»–ä»¬ä¸€äº›æ—¶é—´æ¥å®¡æŸ¥ææ¡ˆï¼Œè¿™å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚åŒæ ·ï¼Œæˆ‘ä»¬æœ‰ `voting_period_in_blocks`ï¼Œ å®ƒåªæ˜¯æŒ‡å®šä¸€æ—¦ææ¡ˆç”Ÿæ•ˆåŽæŸäººå¿…é¡»å¤šé•¿æ—¶é—´æŠ•ç¥¨ï¼Œæˆ‘ä»¬ä»¥åŒºå—çš„å½¢å¼è¿›è¡ŒæŠ•ç¥¨ï¼Œè¿™å–å†³äºŽæ‚¨æ‰€åœ¨çš„åŒºå—é“¾ï¼Œå¯èƒ½éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œå¯¹äºŽä»¥å¤ªåŠ/Goerliï¼Œæ¯ 13 ç§’å°±æœ‰ä¸€ä¸ªåŒºå—å¤§çº¦ï¼Œæ‰€ä»¥å¹³å‡æ¥è¯´ï¼Œä¸€å¤©æœ‰ 6570 ä¸ªåŒºå—ã€‚

`voting_quorum_fraction` çœŸçš„å¾ˆæœ‰è¶£ã€‚å‡è®¾ä¸€ä¸ªæˆå‘˜åˆ›å»ºäº†ä¸€ä¸ªææ¡ˆï¼Œè€Œå…¶ä»– **199** å DAO æˆå‘˜æ­£åœ¨è¿ªæ–¯å°¼ä¸–ç•Œåº¦å‡å¹¶ä¸”ä¸åœ¨çº¿ã€‚å¥½å§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æžœè¯¥ DAO æˆå‘˜åˆ›å»ºææ¡ˆå¹¶å¯¹ä»–ä»¬è‡ªå·±çš„ææ¡ˆæŠ•äº†â€œYESâ€ç¥¨â€”â€”è¿™æ„å‘³ç€ 100% çš„é€‰ç¥¨è¯´â€œYESâ€ï¼ˆå› ä¸ºåªæœ‰ä¸€ç¥¨ï¼‰,ä¸€æ—¦`vote_period_in_blocks`ç»“æŸï¼Œè¯¥ææ¡ˆå°±ä¼šé€šè¿‡ï¼ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ³•å®šäººæ•°ï¼Œä¸Šé¢å†™ç€â€œä¸ºäº†ä½¿ææ¡ˆé€šè¿‡ï¼Œå¿…é¡»åœ¨æŠ•ç¥¨ä¸­ä½¿ç”¨è‡³å°‘ x % çš„ä»£å¸â€ã€‚

ä¸ºäº†ä¸¾ä¾‹è¯´æ˜Žï¼Œæˆ‘ä»¬å°±ç”¨ `voting_quorum_fraction: 0` ï¼Œè¿™æ„å‘³ç€æ— è®ºæŠ•ç¥¨ä¸­ä½¿ç”¨äº†å¤šå°‘ç™¾åˆ†æ¯”çš„ä»£å¸ï¼Œææ¡ˆéƒ½ä¼šé€šè¿‡ã€‚è¿™æ„å‘³ç€å¦‚æžœå…¶ä»–æˆå‘˜æ­£åœ¨åº¦å‡ï¼Œä¸€ä¸ªäººåœ¨æŠ€æœ¯ä¸Šå¯ä»¥è‡ªå·±é€šè¿‡ææ¡ˆï¼Œã€‚å°±ç›®å‰è€Œè¨€ï¼Œè¿™å¾ˆå¥½ã€‚æ‚¨åœ¨çŽ°å®žä¸–ç•Œä¸­è®¾ç½®çš„æ³•å®šäººæ•°å–å†³äºŽæ‚¨çš„ä¾›åº”é‡ä»¥åŠæ‚¨æœ€åˆç©ºæŠ•çš„æ•°é‡ã€‚

æœ€åŽï¼Œæˆ‘ä»¬ç”¨ `proposal_token_threshold: "0"` å…è®¸ä»»ä½•äººå®žé™…åˆ›å»ºææ¡ˆï¼Œå³ä½¿ä»–ä»¬æŒæœ‰é›¶æ²»ç†ä»¤ç‰Œã€‚ç”±ä½ å†³å®šä½ æƒ³è®¾ç½®ä»€ä¹ˆï¼è®©æˆ‘ä»¬æš‚æ—¶å°†å…¶ä¿æŒä¸ºé›¶ã€‚

ç»§ç»­å¹¶è¿è¡Œ `node scripts/8-deploy-vote.js`. è¿™æ˜¯æˆ‘æœ€ç»ˆå¾—åˆ°çš„ï¼š

```plaintext
buildspace-dao-starter % node scripts/8-deploy-vote.js
ðŸ‘‹ SDK initialized by address: 0xF11D6862e655b5F4e8f62E00471261D2f9c7E380
âœ… Successfully deployed vote contract, address: 0xE079991f3c26b832C3E8171F512694899E831eDB
```

è¿™å¾ˆé…·ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬åˆ›å»ºå¹¶éƒ¨ç½²äº†ä¸€ä¸ªæ–°çš„æ™ºèƒ½åˆçº¦ï¼Œè®©æˆ‘ä»¬å¯¹é“¾ä¸Šçš„ææ¡ˆè¿›è¡Œå®žé™…æŠ•ç¥¨ã€‚è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ [æ²»ç†](https://docs.openzeppelin.com/contracts/4.x/api/governance?utm_source=buildspace.so&utm_medium=buildspace_project) åˆåŒã€‚æ‚¨å¯ä»¥åœ¨ [æ­¤å¤„](https://github.com/thirdweb-dev/contracts/blob/main/contracts/vote/VoteERC20.sol?utm_source=buildspace.so&utm_medium=buildspace_project)æŸ¥çœ‹æ‚¨éƒ¨ç½²çš„ç¡®åˆ‡åˆåŒã€‚

å¦‚æžœä½ å‰å¾€https://goerli.etherscan.io/ï¼Œä½ ä¼šåœ¨é‚£é‡Œçœ‹åˆ°å®ƒ!ï¼

æ‰€ä»¥ï¼ŒçŽ°åœ¨æˆ‘ä»¬æœ‰äº†ä¸‰ä¸ªåˆçº¦ï¼šæˆ‘ä»¬çš„ NFT åˆçº¦ã€æˆ‘ä»¬çš„ä»£å¸åˆçº¦å’Œæˆ‘ä»¬çš„æŠ•ç¥¨åˆçº¦ï¼è¯·åŠ¡å¿…ä¿å­˜æ‚¨çš„æŠ•ç¥¨åˆçº¦åœ°å€ï¼Œæˆ‘ä»¬ç¨åŽä¼šå†æ¬¡ä½¿ç”¨å®ƒã€‚

### ðŸ¦ è®¾ç½®ä½ çš„é‡‘åº“

æ‰€ä»¥çŽ°åœ¨æˆ‘ä»¬æœ‰äº†æ²»ç†åˆåŒï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä¸œè¥¿è¿›è¡ŒæŠ•ç¥¨ã€‚çœŸæ£’ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ã€‚

**æŠ•ç¥¨åˆçº¦æœ¬èº«æ— æ³•ç§»åŠ¨æˆ‘ä»¬çš„ä»£å¸ã€‚** ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬çŽ°åœ¨æƒ³åˆ›å»ºä¸€ä¸ªææ¡ˆï¼Œä¾‹å¦‚â€œå‘ NarutoLover67 å‘é€ 1000 ç¾Žå…ƒ HOKAGE ä»¥è¡¨å½°å…¶æˆä¸ºä¸€åå‡ºè‰²çš„æˆå‘˜â€ã€‚è¿™å®žé™…ä¸Šæ˜¯è¡Œä¸é€šçš„ã€‚ *æŠ•ç¥¨åˆçº¦çŽ°åœ¨å¯ä»¥ä½¿ç”¨é›¶ä»£å¸ã€‚*

ä¸ºä»€ä¹ˆï¼Ÿ **å› ä¸º** **æ‚¨åˆ›å»ºäº†ä»£å¸ä¾›åº”ã€‚æ‚¨çš„é’±åŒ…æ‹¥æœ‰å¯¹æ•´ä¸ªä¾›åº”çš„è®¿é—®æƒé™ã€‚æ‰€ä»¥åªæœ‰ä½ æœ‰æƒè®¿é—®ä¾›åº”ã€ç§»åŠ¨ä»£å¸ã€ç©ºæŠ•ç­‰ç­‰ã€‚** åŸºæœ¬ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªç‹¬è£å“ˆå“ˆã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¦åšçš„â€”â€”æˆ‘ä»¬å°†æŠŠ 90% çš„ä»£å¸è½¬ç§»åˆ°æŠ•ç¥¨åˆçº¦ä¸­ã€‚ä¸€æ—¦æˆ‘ä»¬çš„ä»£å¸è¢«è½¬ç§»åˆ°æˆ‘ä»¬çš„æŠ•ç¥¨åˆçº¦ä¸­ï¼ŒæŠ•ç¥¨åˆçº¦æœ¬èº«å°±å¯ä»¥è®¿é—®ä¾›åº”ã€‚

**è¿™å°†åŸºæœ¬ä¸Šæˆä¸ºæˆ‘ä»¬çš„â€œç¤¾åŒºé‡‘åº“â€ã€‚**

åœ¨è¿™é‡Œï¼Œæˆ‘åªæ˜¯é€‰æ‹©äº† 90% ä½œä¸ºéšæœº #ã€‚åœ¨å®žè·µä¸­ï¼Œè¿™å–å†³äºŽã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ ENS åˆ†é…æ–¹å¼ï¼š

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/202211072125408.png)

ä»–ä»¬å†³å®šå°† 50% çš„ä¾›åº”åˆ†é…ç»™ä»–ä»¬çš„ç¤¾åŒºé‡‘åº“ï¼æ¯ä¸ª DAO çš„ä»£å¸ç»æµŽå­¦æ˜¯å¦‚æ­¤ä¸åŒï¼Œç›®å‰è¿˜æ²¡æœ‰â€œæ ‡å‡†â€çš„æ–¹å¼æ¥åšäº‹ã€‚æˆ‘éžå¸¸å–œæ¬¢ ENS çš„åšæ³•ã€‚50%åœ¨ç¤¾åŒºï¼Œ25%ç©ºæŠ•ï¼Œå¦å¤–25%ç»™æ ¸å¿ƒå›¢é˜Ÿ+è´¡çŒ®è€…ã€‚

å‰å¾€ `9-setup-vote.js` å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```jsx
import sdk from "./1-initialize-sdk.js";

(async () => {
  try {
    // This is our governance contract.
    const vote = await sdk.getContract("INSERT_VOTE_ADDRESS", "vote");
    // This is our ERC-20 contract.
    const token = await sdk.getContract("INSERT_TOKEN_ADDRESS", "token");
    // Give our treasury the power to mint additional token if needed.
    await token.roles.grant("minter", vote.getAddress());

    console.log(
      "Successfully gave vote contract permissions to act on token contract"
    );
  } catch (error) {
    console.error(
      "failed to grant vote contract permissions on token contract",
      error
    );
    process.exit(1);
  }

  try {
    // This is our governance contract.
    const vote = await sdk.getContract("INSERT_VOTE_ADDRESS", "vote");
    // This is our ERC-20 contract.
    const token = await sdk.getContract("INSERT_TOKEN_ADDRESS", "token");
    // Grab our wallet's token balance, remember -- we hold basically the entire supply right now!
    const ownedTokenBalance = await token.balanceOf(
      process.env.WALLET_ADDRESS
    );

    // Grab 90% of the supply that we hold.
    const ownedAmount = ownedTokenBalance.displayValue;
    const percent90 = Number(ownedAmount) / 100 * 90;

    // Transfer 90% of the supply to our voting contract.
    await token.transfer(
      vote.getAddress(),
      percent90
    ); 

    console.log("âœ… Successfully transferred " + percent90 + " tokens to vote contract");
  } catch (err) {
    console.error("failed to transfer tokens to vote contract", err);
  }
})();
```

è¿™é‡Œæœ‰ä¸€ä¸ªéžå¸¸ç®€å•çš„è„šæœ¬ï¼æˆ‘ä»¬åšä¸¤ä»¶äº‹ï¼š

1. æˆ‘ä»¬ä½¿ç”¨ `token.balanceOf`èŽ·å–æˆ‘ä»¬é’±åŒ…ä¸­çš„æ€»ä»£å¸æ•°é‡ ã€‚è¯·è®°ä½ï¼Œé™¤äº†æˆ‘ä»¬ç©ºæŠ•çš„ä»£å¸ä¹‹å¤–ï¼ŒçŽ°åœ¨æˆ‘ä»¬çš„é’±åŒ…åŸºæœ¬ä¸Šæ‹¥æœ‰å…¨éƒ¨ä¾›åº”ã€‚
2. æˆ‘ä»¬æ‹¿å‡ºæˆ‘ä»¬æ‹¥æœ‰çš„æ€»ä¾›åº”é‡ï¼ŒèŽ·å¾—å…¶ä¸­çš„ 90%ï¼Œç„¶åŽä½¿ç”¨ `token.transfer`å°†è¿™ 90% è½¬ç§»åˆ°æŠ•ç¥¨æ¨¡å—ã€‚å¦‚æžœæ‚¨æ„¿æ„ï¼Œæ‚¨å¯ä»¥ 100% è½¬è®©ï¼ä½†æ˜¯ï¼Œä¹Ÿè®¸ä½ æƒ³ä¸ºè‡ªå·±è¿™ä¸ªåˆ›é€ è€…ä¿ç•™ä¸€äº›ä»£å¸ï¼

å®ŒæˆåŽï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `node scripts/9-setup-vote.js`. è¿™æ˜¯æˆ‘å¾—åˆ°çš„è¾“å‡ºï¼š

```plaintext
buildspace-dao-starter % node scripts/9-setup-vote.js
ðŸ‘‹ SDK initialized by address: 0xF11D6862e655b5F4e8f62E00471261D2f9c7E380
âœ… Successfully gave vote module permissions to act on token module
âœ… Successfully transferred 900000 tokens to vote contract
```

å¥½çš„ï¼Œå‡†å¤‡å¥½çœ‹å²è¯—èˆ¬çš„ç»“æžœäº†å—ï¼Ÿå‰å¾€æ‚¨çš„æŠ•ç¥¨åˆåŒ `https://goerli.etherscan.io/`ã€‚å•å‡»â€œä»¤ç‰Œâ€ä¸€è¯æ—è¾¹çš„ä¸‹æ‹‰èœå•ã€‚åœ¨è¿™é‡Œï¼Œä½ ä¼šçœ‹åˆ°æˆ‘çš„åˆåŒä¸Šæœ‰â€œ844,527 $HOKAGEâ€ã€‚

å½“æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°å®ƒæ—¶ï¼Œä½ ä¼šå¤§åƒä¸€æƒŠã€‚ *æˆ‘ä»¬ç¡®å®žæœ‰è‡ªå·±çš„é‡‘åº“ã€‚*

*æ³¨æ„ï¼šæ ¹æ®æ‚¨çš„ä¾›åº”é‡å’Œç©ºæŠ•é‡ï¼Œæ‚¨çš„é‡‘åº“ä¸­å¯èƒ½æœ‰ä¸åŒçš„é‡‘é¢ã€‚*

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/202211072125596.png)

### âœ… è®©ç”¨æˆ·å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨

#### ðŸ“œ åˆ›å»ºä½ çš„ DAO çš„å‰ä¸¤ä¸ªææ¡ˆ

é…·ã€‚ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ï¼ŒçŽ°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªææ¡ˆï¼å‰å¾€ `10-create-vote-proposals.js` å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```jsx
import sdk from "./1-initialize-sdk.js";
import { ethers } from "ethers";

(async () => {
  try {
    // This is our governance contract.
    const vote = await sdk.getContract("INSERT_VOTE_ADDRESS", "vote");
    // This is our ERC-20 contract.
    const token = await sdk.getContract("INSERT_TOKEN_ADDRESS", "token");
    // Create proposal to mint 420,000 new token to the treasury.
    const amount = 420_000;
    const description = "Should the DAO mint an additional " + amount + " tokens into the treasury?";
    const executions = [
      {
        // Our token contract that actually executes the mint.
        toAddress: token.getAddress(),
        // Our nativeToken is ETH. nativeTokenValue is the amount of ETH we want
        // to send in this proposal. In this case, we're sending 0 ETH.
        // We're just minting new tokens to the treasury. So, set to 0.
        nativeTokenValue: 0,
        // We're doing a mint! And, we're minting to the vote, which is
        // acting as our treasury.
        // in this case, we need to use ethers.js to convert the amount
        // to the correct format. This is because the amount it requires is in wei.
        transactionData: token.encoder.encode(
          "mintTo", [
          vote.getAddress(),
          ethers.utils.parseUnits(amount.toString(), 18),
        ]
        ),
      }
    ];

    await vote.propose(description, executions);

    console.log("âœ… Successfully created proposal to mint tokens");
  } catch (error) {
    console.error("failed to create first proposal", error);
    process.exit(1);
  }

  try {
    // This is our governance contract.
    const vote = await sdk.getContract("INSERT_VOTE_ADDRESS", "vote");
    // This is our ERC-20 contract.
    const token = await sdk.getContract("INSERT_TOKEN_ADDRESS", "token");
    // Create proposal to transfer ourselves 6,900 tokens for being awesome.
    const amount = 6_900;
    const description = "Should the DAO transfer " + amount + " tokens from the treasury to " +
      process.env.WALLET_ADDRESS + " for being awesome?";
    const executions = [
      {
        // Again, we're sending ourselves 0 ETH. Just sending our own token.
        nativeTokenValue: 0,
        transactionData: token.encoder.encode(
          // We're doing a transfer from the treasury to our wallet.
          "transfer",
          [
            process.env.WALLET_ADDRESS,
            ethers.utils.parseUnits(amount.toString(), 18),
          ]
        ),
        toAddress: token.getAddress(),
      },
    ];

    await vote.propose(description, executions);

    console.log(
      "âœ… Successfully created proposal to reward ourselves from the treasury, let's hope people vote for it!"
    );
  } catch (error) {
    console.error("failed to create second proposal", error);
  }
})();
```

çœ‹èµ·æ¥å¾ˆå¤šã€‚æ¥å§ï¼Œä¸€æ­¥ä¸€æ­¥åœ°é˜…è¯»å®ƒï¼æˆ‘ä»¬å®žé™…ä¸Šæ­£åœ¨åˆ›å»ºä¸¤ä¸ªæ–°ææ¡ˆä¾›æˆå‘˜æŠ•ç¥¨ï¼š

**1) æˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªææ¡ˆï¼Œå…è®¸é‡‘åº“é“¸é€  420,000 ä¸ªæ–°ä»£å¸ã€‚**ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ä»£ç ä¸­æ‰§è¡Œäº†äº†`"mint"`ã€‚

ä¹Ÿè®¸é‡‘åº“å¿«ç”¨å®Œäº†ï¼Œæˆ‘ä»¬æƒ³è¦æ›´å¤šçš„ä»£å¸æ¥å¥–åŠ±ä¼šå‘˜ã€‚è¯·è®°ä½ï¼Œæ—©äº›æ—¶å€™æˆ‘ä»¬èµ‹äºˆæˆ‘ä»¬çš„æŠ•ç¥¨åˆçº¦é“¸é€ æ–°ä»£å¸çš„èƒ½åŠ›â€”â€”æ‰€ä»¥è¿™å¾ˆæœ‰æ•ˆï¼è¿™æ˜¯ä¸€ä¸ªæ°‘ä¸»çš„å›½åº“ã€‚å¦‚æžœæ‚¨çš„æˆå‘˜è®¤ä¸ºè¿™ä¸ªæè®®å¾ˆæ„šè ¢å¹¶æŠ•åå¯¹ç¥¨ï¼Œè¿™æ ¹æœ¬ä¸ä¼šé€šè¿‡ï¼

**2) æˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªææ¡ˆï¼Œå°† 6,900 ä»£å¸ä»Žå›½åº“è½¬ç§»åˆ°æˆ‘ä»¬çš„é’±åŒ…ã€‚**ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ä»£ç ä¸­æ‰§è¡ŒåŠ›`"transfer"`ã€‚

ä¹Ÿè®¸æˆ‘ä»¬åšäº†ä¸€äº›å¥½äº‹å¹¶å¸Œæœ›å¾—åˆ°å›žæŠ¥ï¼åœ¨çŽ°å®žä¸–ç•Œä¸­ï¼Œæ‚¨é€šå¸¸ä¼šåˆ›å»ºææ¡ˆä»¥å‘å…¶ä»–äººå‘é€ä»£å¸ã€‚ä¾‹å¦‚ï¼Œä¹Ÿè®¸æœ‰äººå¸®åŠ©ä¸º DAO ç¼–å†™äº†ä¸€ä¸ªæ–°ç½‘ç«™å¹¶å¸Œæœ›èŽ·å¾—å¥–åŠ±ã€‚æˆ‘ä»¬å¯ä»¥è½¬ç§»ä»–ä»¬çš„ä»£å¸ï¼

é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘æƒ³é’ˆå¯¹`nativeTokenValue`åšä¸ªè¯´æ˜Ž. å‡è®¾æˆ‘ä»¬æƒ³è®©æˆ‘ä»¬çš„ææ¡ˆè¯´ï¼Œâ€œæˆ‘ä»¬æƒ³ ç”¨ 2500 ä¸ªæ²»ç†ä»£å¸å’Œ 0.1 ETH å¥–åŠ± NarutoFangirl27å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè¥é”€â€ã€‚è¿™çœŸçš„å¾ˆé…·ï¼è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ ETH å’Œæ²»ç†ä»£å¸å¥–åŠ±äººä»¬â€”â€”ä¸¤å…¨å…¶ç¾Žã€‚*æ³¨æ„ï¼šå¦‚æžœæˆ‘ä»¬æƒ³å‘é€ 0.1 ETHï¼Œé‚£ä¹ˆ0.1ETHå°±éœ€è¦åœ¨æˆ‘ä»¬çš„é‡‘åº“ä¸­ï¼*

å½“æˆ‘è¿è¡Œ`node scripts/10-create-vote-proposals.js` æ—¶ï¼Œ æˆ‘å¾—åˆ°ï¼š

```plaintext
buildspace-dao-starter % node scripts/10-create-vote-proposals.js
ðŸ‘‹ SDK initialized by address: 0xF11D6862e655b5F4e8f62E00471261D2f9c7E380
âœ… Successfully created proposal to mint tokens
âœ… Successfully created proposal to reward ourselves from the treasury, let's hope people vote for it!
```

é…·ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„ææ¡ˆã€‚æˆ‘ä»¬è¦åšçš„æœ€åŽä¸€ä»¶äº‹å°±æ˜¯è®©ç”¨æˆ·çŽ°åœ¨å°±ä»Žæˆ‘ä»¬çš„ DAO ä»ªè¡¨æ¿å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ï¼

æ³¨æ„ï¼šå¦‚æžœæ‚¨è®¾ç½®äº†`proposal_token_threshold`> 0 ----- ä»£ç å¯èƒ½ä¼šå¼•å‘é”™è¯¯ã€‚ä½ å¯èƒ½ä¸å¾—ä¸å°†ä½ çš„ä»£å¸å§”æ‰˜ç»™ æŠ•ç¥¨åˆçº¦ï¼ˆåœ¨ç›¸å…³çš„ç½‘ç»œä¸Šï¼‰ï¼Œä»¥ä¾¿åœ¨éƒ¨ç½²ææ¡ˆä¹‹å‰å‘æŒ¥ä½œç”¨ã€‚

### âœï¸ è®©ç”¨æˆ·ä»Žä»ªè¡¨æ¿å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨

æœ€åŽï¼Œè®©æˆ‘ä»¬æŠŠè¿™ä¸€åˆ‡å¸¦å›žå®¶ã€‚çŽ°åœ¨ï¼Œæˆ‘ä»¬çš„ææ¡ˆåŸºäºŽæˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°çœ‹åˆ°ä»–ä»¬å¹¶æŠ•ç¥¨ï¼è®©æˆ‘ä»¬è¿™æ ·åšã€‚å‰å¾€ `App.jsx`ã€‚

ç»§ç»­å¹¶åœ¨ `token`ä¸‹æ·»åŠ ï¼š

```jsx
const { contract: vote } = useContract("INSERT_VOTE_ADDRESS", "vote");
```

æˆ‘ä»¬çš„ç½‘ç»œåº”ç”¨ç¨‹åºéœ€è¦è®¿é—®æˆ‘ä»¬çš„`vote` æƒé™ï¼Œ ä»¥ä¾¿ç”¨æˆ·å¯ä»¥ä¸Žè¯¥åˆçº¦è¿›è¡Œäº¤äº’ã€‚

ä»Žè¿™é‡Œï¼Œè®©æˆ‘ä»¬åœ¨`shortenAddress`å‡½æ•°ä¸‹æ–¹çš„æŸå¤„æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```jsx
const [proposals, setProposals] = useState([]);
const [isVoting, setIsVoting] = useState(false);
const [hasVoted, setHasVoted] = useState(false);

// Retrieve all our existing proposals from the contract.
useEffect(() => {
  if (!hasClaimedNFT) {
    return;
  }

  // A simple call to vote.getAll() to grab the proposals.
  const getAllProposals = async () => {
    try {
      const proposals = await vote.getAll();
      setProposals(proposals);
      console.log("ðŸŒˆ Proposals:", proposals);
    } catch (error) {
      console.log("failed to get proposals", error);
    }
  };
  getAllProposals();
}, [hasClaimedNFT, vote]);

// We also need to check if the user already voted.
useEffect(() => {
  if (!hasClaimedNFT) {
    return;
  }

  // If we haven't finished retrieving the proposals from the useEffect above
  // then we can't check if the user voted yet!
  if (!proposals.length) {
    return;
  }

  const checkIfUserHasVoted = async () => {
    try {
      const hasVoted = await vote.hasVoted(proposals[0].proposalId, address);
      setHasVoted(hasVoted);
      if (hasVoted) {
        console.log("ðŸ¥µ User has already voted");
      } else {
        console.log("ðŸ™‚ User has not voted yet");
      }
    } catch (error) {
      console.error("Failed to check if wallet has voted", error);
    }
  };
  checkIfUserHasVoted();

}, [hasClaimedNFT, proposals, address, vote]);
```

æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåšä¸¤ä»¶äº‹ï¼

é¦–å…ˆç¬¬ä¸€ä¸ª`useEffect`ï¼Œæˆ‘ä»¬æ­£åœ¨ `vote.getAll()` èŽ·å–å­˜åœ¨äºŽæˆ‘ä»¬çš„æ²»ç†åˆåŒä¸­çš„æ‰€æœ‰ææ¡ˆï¼Œç„¶åŽ `setProposals` ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ç¨åŽå†æ¸²æŸ“å®ƒä»¬ã€‚

åœ¨ç¬¬äºŒä¸ª useEffect ä¸­ï¼Œæˆ‘ä»¬æ­£åœ¨`vote.hasVoted(proposals[0].proposalId, address)`æ£€æŸ¥è¯¥åœ°å€æ˜¯å¦å¯¹ç¬¬ä¸€ä¸ªææ¡ˆè¿›è¡Œäº†æŠ•ç¥¨ã€‚å¦‚æžœæœ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬`setHasVoted`è¿™æ ·åšæ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸èƒ½å†æ¬¡æŠ•ç¥¨ï¼å³ä½¿æˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªï¼Œå¦‚æžœç”¨æˆ·å°è¯•åŒé‡æŠ•ç¥¨ï¼Œæˆ‘ä»¬çš„åˆçº¦ä¹Ÿä¼šæ‹’ç»äº¤æ˜“ï¼

thirdweb çš„é­”åŠ›åœ¨äºŽï¼Œå®ƒä¸ä»…è®©æ™ºèƒ½åˆçº¦çš„éƒ¨ç½²å˜å¾—éžå¸¸å®¹æ˜“ï¼Œè€Œä¸”è¿˜è®©æˆ‘ä»¬çš„å®¢æˆ·ç«¯é€šè¿‡ç®€å•çš„åŠŸèƒ½ä¸Žå®ƒä»¬è¿›è¡Œäº¤äº’å˜å¾—éžå¸¸å®¹æ˜“ï¼Œæ¯”å¦‚`vote.getAll()`ï¼

ç»§ç»­åˆ·æ–°æ‚¨çš„é¡µé¢ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨ ðŸŒˆ æ—è¾¹çœ‹åˆ°æ‚¨çš„ææ¡ˆæ‰“å°å‡ºæ¥ï¼Œæ‚¨å¯ä»¥æµè§ˆæ‰€æœ‰æ•°æ®ï¼

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/202211072128574.png)

å¦‚æžœæ‚¨å·²ç»æŠ•ç¥¨ï¼Œæ‚¨ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/202211072128468.png)

ä¸‹ä¸€æ®µä»£ç æœ‰ç‚¹å¤§ï¼Œå®ƒæ¶‰åŠåˆ°å®žé™…æ¸²æŸ“æˆ‘ä»¬åˆšåˆšæ£€ç´¢åˆ°çš„ææ¡ˆï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥æœ‰ä¸‰ä¸ªé€‰é¡¹æ¥æŠ•ç¥¨ï¼š

1. æ”¯æŒ
2. åå¯¹
3. å¼ƒæƒ

å¦‚æžœæ‚¨ç†Ÿæ‚‰ React/JSï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°æµè§ˆå®ƒå¹¶è‡ªå·±å¼„æ¸…æ¥šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å¦‚æžœä½ ä¸å¤ªäº†è§£ React/JSï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚åªéœ€å¤åˆ¶ç²˜è´´å³å¯ã€‚è¿™å¹¶ä¸ä¸¢äºº!

åœ¨çŽ°æœ‰å¯¼å…¥ä¹‹åŽæ·»åŠ AddressZeroå¯¼å…¥ï¼š

```jsx
import { AddressZero } from "@ethersproject/constants";
```

ç»§ç»­ç”¨[è¿™é‡Œ](https://github.com/buildspace/buildspace-dao-final/blob/main/src/App.jsx#L184?utm_source=buildspace.so&utm_medium=buildspace_project)çš„ä»£ç æ›¿æ¢ `if (hasClaimedNFT) { }`çš„å†…å®¹ã€‚

å½“æ‚¨æ£€æŸ¥æ‚¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/202211072128392.png)

å¾ˆå¥½ã€‚æ‚¨çŽ°åœ¨å¯ä»¥å®žé™…ä½¿ç”¨è¿™äº›æŒ‰é’®è¿›è¡ŒæŠ•ç¥¨ã€‚

æˆ‘ä»¬å°†æ²»ç†åˆçº¦è®¾ç½®ä¸ºåœ¨ 24 å°æ—¶åŽåœæ­¢æŠ•ç¥¨ã€‚è¿™æ„å‘³ç€ 24 å°æ—¶åŽï¼Œå¦‚æžœï¼š

```plaintext
votes "for" proposal > votes "against" proposal
```

é‚£ä¹ˆä»»ä½•æˆå‘˜éƒ½å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„æ²»ç†åˆçº¦æ‰§è¡Œè¯¥ææ¡ˆã€‚ææ¡ˆä¸èƒ½è‡ªåŠ¨æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œä¸€æ—¦ææ¡ˆé€šè¿‡ï¼Œ DAO çš„**ä»»ä½•æˆå‘˜**éƒ½å¯ä»¥è§¦å‘è¢«æŽ¥å—çš„ææ¡ˆã€‚

ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨å¤„ç†é¢å¤–é“¸é€  420,000 ä¸ªä»£å¸çš„ææ¡ˆã€‚å¦‚æžœ`votes "for" proposal > votes "against" proposal`  â€”â€”é‚£ä¹ˆä»»ä½•äººéƒ½å¯ä»¥è§¦å‘ææ¡ˆï¼Œç„¶åŽæˆ‘ä»¬çš„åˆçº¦å°†é“¸é€ ä»£å¸ã€‚æœ‰ç‚¹ç–¯ç‹‚ï¼Œå¯¹å§ï¼Ÿé™¤äº†åŒºå—é“¾ï¼Œæˆ‘ä»¬å¿…é¡»ä¿¡ä»»ä»»ä½•äººã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªè…è´¥çš„å›½å®¶ï¼Œä¸ºæŸäº‹æŠ•ç¥¨ï¼Œç„¶åŽä½ çš„æ”¿åºœå¯¹ä½ æ’’è°Žå¹¶è¯´â€œå˜¿ï¼Œå®žé™…ä¸Šæˆ‘ä»¬æ²¡æœ‰å¾—åˆ°è¶³å¤Ÿçš„é€‰ç¥¨ jkâ€ï¼Œè€Œä½ çœŸçš„è¿™æ ·åšäº†ï¼Œå“ˆå“ˆã€‚æˆ–è€…ï¼Œæƒ³è±¡ä»–ä»¬è¯´ï¼Œâ€œå¥½å§ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¶³å¤Ÿçš„é€‰ç¥¨ï¼Œæˆ‘ä»¬ä¼šåšåˆ°æˆ‘ä»¬æ‰¿è¯ºçš„â€ï¼Œä½†æ°¸è¿œä¸ä¼šè¿™æ ·åšï¼

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€åˆ‡éƒ½è¢«ç¼–ç ï¼Œä»£ç ä¸ä¼šè¯´è°Žã€‚

æ— è®ºå¦‚ä½•ï¼ŒçŽ°åœ¨ä¸æ˜¯è®¨è®º DAO å¦‚ä½•æ½œåœ¨åœ°æ”¹å–„æˆ‘ä»¬çš„æ”¿åºœçš„æ—¶å€™ï¼›ï¼‰ã€‚æˆ‘ä»¬å¿…é¡»åœ¨æ­¤æ—¶æ­¤åœ°å®Œæˆæˆ‘ä»¬çš„ meme DAOï¼é©¬ä¸Šäº†ã€‚

> Githubæºç ï¼šhttps://github.com/buildspace/buildspace-projects/tree/main/JS_DAO/
>
> åŽŸæ–‡é“¾æŽ¥ï¼šhttps://buildspace.so/p/build-dao-with-javascript

![](https://hicoldcat.oss-cn-hangzhou.aliyuncs.com/img/profile.jpg)
